(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let To,yo;function Co(){return{geminiUrl:To,vertexUrl:yo}}function vo(n,e,t,o){var r,l;if(!(n!=null&&n.baseUrl)){const a=Co();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:t:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O{}function y(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(n,e,t){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in n))if(Array.isArray(t))n[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[u])){const f=n[u];if(Array.isArray(t))for(let c=0;c<f.length;c++){const d=f[c];s(d,e.slice(l+1),t[c])}else for(const c of f)s(c,e.slice(l+1),t)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in n||(n[u]=[{}]);const f=n[u];s(f[0],e.slice(l+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function i(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const o=e[t];if(o.endsWith("[]")){const r=o.slice(0,-2);if(r in n){const l=n[r];return Array.isArray(l)?l.map(a=>i(a,e.slice(t+1))):void 0}else return}else n=n[o]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ze(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eo(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["_url","operationName"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function So(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["operationName"],t);const o=i(n,["resourceName"]);o!=null&&s(e,["_url","resourceName"],o);const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function _o(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["_url","operationName"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Io(n){const e={},t=i(n,["video","uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],ze(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Mo(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Io(t)),e}function Ao(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Mo(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Ro(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],Ao(a)),e}function Po(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],ze(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function xo(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Po(t)),e}function No(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>xo(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Do(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],No(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sn;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(sn||(sn={}));var rn;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(rn||(rn={}));var V;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(V||(V={}));var ln;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(ln||(ln={}));var an;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(an||(an={}));var un;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(un||(un={}));var cn;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(cn||(cn={}));var fn;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(fn||(fn={}));var dn;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dn||(dn={}));var pn;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(pn||(pn={}));var mn;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(mn||(mn={}));var gn;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(gn||(gn={}));var hn;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(hn||(hn={}));var Tn;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Tn||(Tn={}));var yn;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(yn||(yn={}));var Me;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Me||(Me={}));var Cn;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Cn||(Cn={}));var Ve;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ve||(Ve={}));var vn;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(vn||(vn={}));var En;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(En||(En={}));var Sn;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Sn||(Sn={}));var _n;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(_n||(_n={}));var In;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(In||(In={}));var Mn;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Mn||(Mn={}));var An;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(An||(An={}));var Rn;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Rn||(Rn={}));var Pn;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Pn||(Pn={}));var xn;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(xn||(xn={}));var Nn;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Nn||(Nn={}));var Dn;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Dn||(Dn={}));var wn;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wn||(wn={}));var kn;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(kn||(kn={}));var Ln;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Ln||(Ln={}));var Un;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Un||(Un={}));var Fn;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Fn||(Fn={}));var Vn;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Vn||(Vn={}));var qn;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(qn||(qn={}));var Gn;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Gn||(Gn={}));var Hn;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Hn||(Hn={}));var $n;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})($n||($n={}));var Bn;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Bn||(Bn={}));var Jn;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Jn||(Jn={}));var Yn;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Yn||(Yn={}));var Wn;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Wn||(Wn={}));var Kn;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Kn||(Kn={}));var bn;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(bn||(bn={}));var zn;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(zn||(zn={}));var te;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(te||(te={}));class qe{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class fe{get text(){var e,t,o,r,l,a,u,f;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const p=[];for(const m of(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[g,h]of Object.entries(m))g!=="text"&&g!=="thought"&&(h!==null||h!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,t,o,r,l,a,u,f;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const p of(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,o,r,l,a,u,f;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,o,r,l,a,u,f,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,o,r,l,a,u,f,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class Xn{}class Qn{}class wo{}class ko{}class Lo{}class Uo{}class Zn{}class On{}class jn{}class Fo{}class Ae{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const o=new Ae;let r;const l=e;return t?r=Do(l):r=Ro(l),Object.assign(o,r),o}}class et{}class nt{}class tt{}class Vo{}class qo{}class Go{}class ot{}class Ho{get text(){var e,t,o;let r="",l=!1;const a=[];for(const u of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[f,c]of Object.entries(u))f!=="text"&&f!=="thought"&&c!==null&&a.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const a of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[u,f]of Object.entries(a))u!=="inlineData"&&f!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class $o{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Pt(n,e){const t=P(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function xt(n){return Array.isArray(n)?n.map(e=>Re(e)):[Re(n)]}function Re(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Nt(n){const e=Re(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Dt(n){const e=Re(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function it(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function wt(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>it(e)):[it(n)]}function Ge(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function st(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function rt(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function F(n){if(n==null)throw new Error("ContentUnion is required");return Ge(n)?n:{role:"user",parts:wt(n)}}function Xe(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=F(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=F(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>F(t)):[F(e)]}function G(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(st(n)||rt(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[F(n)]}const e=[],t=[],o=Ge(n[0]);for(const r of n){const l=Ge(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(st(r)||rt(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:wt(t)}),e}function Bo(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(V).includes(t[0].toUpperCase())?t[0].toUpperCase():V.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(V).includes(o.toUpperCase())?o.toUpperCase():V.TYPE_UNSPECIFIED})}}function oe(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Bo(n.type,e);for(const[a,u]of Object.entries(n))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(V).includes(u.toUpperCase())?u.toUpperCase():V.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=oe(u);else if(o.includes(a)){const f=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}f.push(oe(c))}e[a]=f}else if(r.includes(a)){const f={};for(const[c,d]of Object.entries(u))f[c]=oe(d);e[a]=f}else{if(a==="additionalProperties")continue;e[a]=u}return e}function Qe(n){return oe(n)}function Ze(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Oe(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function le(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=oe(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=oe(e.response));return n}function ae(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Jo(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function z(n,e){if(typeof e!="string")throw new Error("name must be a string");return Jo(n,e,"cachedContents")}function kt(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function j(n){return ze(n)}function Yo(n){return n!=null&&typeof n=="object"&&"name"in n}function Wo(n){return n!=null&&typeof n=="object"&&"video"in n}function Ko(n){return n!=null&&typeof n=="object"&&"uri"in n}function Lt(n){var e;let t;if(Yo(n)&&(t=n.name),!(Ko(n)&&(t=n.uri,t===void 0))&&!(Wo(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Ut(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Ft(n){for(const e of["models","tunedModels","publisherModels"])if(bo(n,e))return n[e];return[]}function bo(n,e){return n!==null&&typeof n=="object"&&e in n}function zo(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Xo(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=zo(r,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function Vt(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Qo(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function qt(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const f=a.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ue(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Gt(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zo(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Oo(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function jo(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ei(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function ni(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Zo(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Oo(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],jo(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],ei(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Ht(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>ni(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function ti(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const u=i(n,["format"]);u!=null&&s(e,["format"],u);const f=i(n,["items"]);f!=null&&s(e,["items"],f);const c=i(n,["maxItems"]);c!=null&&s(e,["maxItems"],c);const d=i(n,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=i(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(n,["minLength"]);h!=null&&s(e,["minLength"],h);const T=i(n,["minProperties"]);T!=null&&s(e,["minProperties"],T);const C=i(n,["minimum"]);C!=null&&s(e,["minimum"],C);const S=i(n,["nullable"]);S!=null&&s(e,["nullable"],S);const v=i(n,["pattern"]);v!=null&&s(e,["pattern"],v);const E=i(n,["properties"]);E!=null&&s(e,["properties"],E);const I=i(n,["propertyOrdering"]);I!=null&&s(e,["propertyOrdering"],I);const _=i(n,["required"]);_!=null&&s(e,["required"],_);const x=i(n,["title"]);x!=null&&s(e,["title"],x);const N=i(n,["type"]);return N!=null&&s(e,["type"],N),e}function oi(n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&s(e,["category"],t);const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function ii(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function si(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function ri(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],si(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function li(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function ai(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],li(t)),e}function ui(){return{}}function ci(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function fi(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(c=>ii(c))),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],ri(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],ai(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],ui());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],ci(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function di(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function pi(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function mi(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],pi(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function gi(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],di(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],mi(o)),e}function hi(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function $t(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],hi(t)),e}function Ti(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],$t(o)),e}function yi(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Ti(r))),s(e,["speakerVoiceConfigs"],o)}return e}function Ci(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],$t(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],yi(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function vi(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Ei(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],Ht(F(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const f=i(e,["candidateCount"]);f!=null&&s(o,["candidateCount"],f);const c=i(e,["maxOutputTokens"]);c!=null&&s(o,["maxOutputTokens"],c);const d=i(e,["stopSequences"]);d!=null&&s(o,["stopSequences"],d);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const T=i(e,["seed"]);T!=null&&s(o,["seed"],T);const C=i(e,["responseMimeType"]);C!=null&&s(o,["responseMimeType"],C);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],ti(Qe(S)));const v=i(e,["responseJsonSchema"]);if(v!=null&&s(o,["responseJsonSchema"],v),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=i(e,["safetySettings"]);if(t!==void 0&&E!=null){let D=E;Array.isArray(D)&&(D=D.map(B=>oi(B))),s(t,["safetySettings"],D)}const I=i(e,["tools"]);if(t!==void 0&&I!=null){let D=ae(I);Array.isArray(D)&&(D=D.map(B=>fi(le(B)))),s(t,["tools"],D)}const _=i(e,["toolConfig"]);if(t!==void 0&&_!=null&&s(t,["toolConfig"],gi(_)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=i(e,["cachedContent"]);t!==void 0&&x!=null&&s(t,["cachedContent"],z(n,x));const N=i(e,["responseModalities"]);N!=null&&s(o,["responseModalities"],N);const U=i(e,["mediaResolution"]);U!=null&&s(o,["mediaResolution"],U);const A=i(e,["speechConfig"]);if(A!=null&&s(o,["speechConfig"],Ci(Ze(A))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const w=i(e,["thinkingConfig"]);return w!=null&&s(o,["thinkingConfig"],vi(w)),o}function Si(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["request","model"],P(n,o));const r=i(e,["contents"]);if(r!=null){let a=G(r);Array.isArray(a)&&(a=a.map(u=>Ht(u))),s(t,["request","contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["request","generationConfig"],Ei(n,l,t)),t}function _i(n,e){const t={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&s(t,["fileName"],o);const r=i(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Si(n,a))),s(t,["requests","requests"],l)}return t}function Ii(n,e){const t={},o=i(n,["displayName"]);if(e!==void 0&&o!=null&&s(e,["batch","displayName"],o),i(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Le(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],_i(n,Vt(n,r)));const l=i(e,["config"]);return l!=null&&s(t,["config"],Ii(l,t)),t}function Mi(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Ai(n,e){const t={},o=i(e,["contents"]);o!=null&&s(t,["requests[]","request","content"],Xe(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Mi(r,t)),t}function Ri(n,e){const t={},o=i(e,["fileName"]);o!=null&&s(t,["file_name"],o);const r=i(e,["inlinedRequests"]);return r!=null&&s(t,["requests"],Ai(n,r)),t}function Pi(n,e){const t={},o=i(n,["displayName"]);return e!==void 0&&o!=null&&s(e,["batch","displayName"],o),t}function Ue(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],Ri(n,r));const l=i(e,["config"]);return l!=null&&s(t,["config"],Pi(l,t)),t}function xi(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],ue(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ni(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],ue(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Di(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);if(e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),i(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function wi(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Di(t,e)),e}function ki(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],ue(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Li(n){const e={},t=i(n,["format"]);t!=null&&s(e,["instancesFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsSource","uris"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigquerySource","inputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Ui(n){const e={},t=i(n,["format"]);t!=null&&s(e,["predictionsFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsDestination","outputUriPrefix"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigqueryDestination","outputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(i(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Fi(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["dest"]);return e!==void 0&&r!=null&&s(e,["outputConfig"],Ui(Qo(r))),t}function Vi(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],P(n,o));const r=i(e,["src"]);r!=null&&s(t,["inputConfig"],Li(Vt(n,r)));const l=i(e,["config"]);return l!=null&&s(t,["config"],Fi(l,t)),t}function qi(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],ue(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Gi(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],ue(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Hi(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function $i(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Hi(t,e)),e}function Bi(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],ue(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ji(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Yi(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Wi(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ki(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function bi(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Ji(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Yi(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Wi(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Ki(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function zi(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>bi(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Xi(n){const e={},t=i(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function Qi(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Zi(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Qi(r))),s(e,["urlMetadata"],o)}return e}function Oi(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],zi(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Xi(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Zi(a));const u=i(n,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const f=i(n,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const d=i(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function ji(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(c=>Oi(c))),s(e,["candidates"],f)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function je(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["code"]);o!=null&&s(e,["code"],o);const r=i(n,["message"]);return r!=null&&s(e,["message"],r),e}function es(n){const e={},t=i(n,["response"]);t!=null&&s(e,["response"],ji(t));const o=i(n,["error"]);return o!=null&&s(e,["error"],je(o)),e}function ns(n){const e={},t=i(n,["values"]);return t!=null&&s(e,["values"],t),e}function ts(n){const e={},t=i(n,["embedding"]);t!=null&&s(e,["embedding"],ns(t));const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function os(n){const e={},t=i(n,["response"]);t!=null&&s(e,["response"],ts(t));const o=i(n,["error"]);return o!=null&&s(e,["error"],je(o)),e}function is(n){const e={},t=i(n,["responsesFile"]);t!=null&&s(e,["fileName"],t);const o=i(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>es(a))),s(e,["inlinedResponses"],l)}const r=i(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>os(a))),s(e,["inlinedEmbedContentResponses"],l)}return e}function ee(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata","displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["metadata","state"]);r!=null&&s(e,["state"],Gt(r));const l=i(n,["metadata","createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["metadata","endTime"]);a!=null&&s(e,["endTime"],a);const u=i(n,["metadata","updateTime"]);u!=null&&s(e,["updateTime"],u);const f=i(n,["metadata","model"]);f!=null&&s(e,["model"],f);const c=i(n,["metadata","output"]);return c!=null&&s(e,["dest"],is(qt(c))),e}function ss(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>ee(a))),s(e,["batchJobs"],l)}return e}function rs(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],je(l)),e}function Bt(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["code"]);o!=null&&s(e,["code"],o);const r=i(n,["message"]);return r!=null&&s(e,["message"],r),e}function ls(n){const e={},t=i(n,["instancesFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsSource","uris"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigquerySource","inputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function as(n){const e={},t=i(n,["predictionsFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsDestination","outputUriPrefix"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigqueryDestination","outputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function He(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],Gt(r));const l=i(n,["error"]);l!=null&&s(e,["error"],Bt(l));const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["startTime"]);u!=null&&s(e,["startTime"],u);const f=i(n,["endTime"]);f!=null&&s(e,["endTime"],f);const c=i(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const d=i(n,["model"]);d!=null&&s(e,["model"],d);const p=i(n,["inputConfig"]);p!=null&&s(e,["src"],ls(p));const m=i(n,["outputConfig"]);return m!=null&&s(e,["dest"],as(qt(m))),e}function us(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>He(a))),s(e,["batchJobs"],l)}return e}function cs(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],Bt(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Z;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Z||(Z={}));class Te{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fs extends O{constructor(e){super(),this.apiClient=e,this.create=async t=>{var o,r;if(this.apiClient.isVertexAI())return t.config=this.formatDestination(t.src,t.config),this.createInternal(t);const l=t.src;if(!(Array.isArray(t.src)||l.inlinedRequests!==void 0))return this.createInternal(t);const u=this.createInlinedGenerateContentRequest(t),f=u.path,c=u.body,d=Le(this.apiClient,t)._query||{};return this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()).then(m=>ee(m))},this.createEmbeddings=async t=>{var o,r;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(t.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(t);const u=this.createInlinedEmbedContentRequest(t),f=u.path,c=u.body,d=Ue(this.apiClient,t)._query||{};return this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()).then(m=>ee(m))},this.list=async(t={})=>new Te(Z.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Le(this.apiClient,e),o=t._url,r=y("{model}:batchGenerateContent",o),u=t.batch.inputConfig.requests,f=u.requests,c=[];for(const d of f){const p=Object.assign({},d);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=m,p.request=g}c.push(p)}return u.requests=c,delete t.config,delete t._url,delete t._query,{path:r,body:t}}createInlinedEmbedContentRequest(e){const t=Ue(this.apiClient,e),o=t._url,r=y("{model}:asyncBatchEmbedContent",o),u=t.batch.inputConfig.requests,f=u.requests,c=[];delete u.config;for(const d of f){const p=Object.assign({},d),m=p.request;for(const g in p)g!=="request"&&(m[g]=p[g],delete p[g]);c.push(p)}return u.requests=c,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),a=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(a)o.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Vi(this.apiClient,e);return u=y("batchPredictionJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>He(d))}else{const c=Le(this.apiClient,e);return u=y("{model}:batchGenerateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>ee(d))}}async createEmbeddingsInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ue(this.apiClient,e);return l=y("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>ee(f))}}async get(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=qi(this.apiClient,e);return u=y("batchPredictionJobs/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>He(d))}else{const c=xi(this.apiClient,e);return u=y("batches/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>ee(d))}}async cancel(e){var t,o,r,l;let a="",u={};if(this.apiClient.isVertexAI()){const f=Gi(this.apiClient,e);a=y("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const f=Ni(this.apiClient,e);a=y("batches/{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=$i(e);return u=y("batchPredictionJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=us(d),m=new ot;return Object.assign(m,p),m})}else{const c=wi(e);return u=y("batches",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=ss(d),m=new ot;return Object.assign(m,p),m})}}async delete(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Bi(this.apiClient,e);return u=y("batchPredictionJobs/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>cs(d))}else{const c=ki(this.apiClient,e);return u=y("batches/{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>rs(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ds(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ps(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ms(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function gs(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function hs(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],ds(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],ps(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],ms(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],gs(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function lt(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>hs(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ts(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function ys(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Cs(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],ys(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function vs(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Es(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],vs(t)),e}function Ss(){return{}}function _s(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function Is(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(c=>Ts(c))),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],Cs(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Es(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Ss());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],_s(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function Ms(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function As(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Rs(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],As(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Ps(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Ms(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Rs(o)),e}function xs(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let d=G(a);Array.isArray(d)&&(d=d.map(p=>lt(p))),s(e,["contents"],d)}const u=i(n,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],lt(F(u)));const f=i(n,["tools"]);if(e!==void 0&&f!=null){let d=f;Array.isArray(d)&&(d=d.map(p=>Is(p))),s(e,["tools"],d)}const c=i(n,["toolConfig"]);if(e!==void 0&&c!=null&&s(e,["toolConfig"],Ps(c)),i(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Ns(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],Pt(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],xs(r,t)),t}function Ds(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],z(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function ws(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],z(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function ks(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function Ls(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],z(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],ks(r,t)),t}function Us(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Fs(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Us(t,e)),e}function Vs(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function qs(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Gs(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Hs(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function $s(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Vs(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],qs(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Gs(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Hs(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function at(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>$s(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Bs(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function Js(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Ys(n){const e={},t=i(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],Js(t));const o=i(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function Ws(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Ks(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Ws(t)),e}function bs(n){const e={},t=i(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function zs(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Xs(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],zs(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(n,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function Qs(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],Xs(t)),e}function Zs(){return{}}function Os(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function js(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Bs(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],Ys(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Ks(l));const a=i(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],bs(a));const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],Qs(u)),i(n,["urlContext"])!=null&&s(e,["urlContext"],Zs());const c=i(n,["computerUse"]);c!=null&&s(e,["computerUse"],Os(c));const d=i(n,["codeExecution"]);return d!=null&&s(e,["codeExecution"],d),e}function er(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function nr(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function tr(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],nr(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function or(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],er(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],tr(o)),e}function ir(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let p=G(a);Array.isArray(p)&&(p=p.map(m=>at(m))),s(e,["contents"],p)}const u=i(n,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],at(F(u)));const f=i(n,["tools"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>js(m))),s(e,["tools"],p)}const c=i(n,["toolConfig"]);e!==void 0&&c!=null&&s(e,["toolConfig"],or(c));const d=i(n,["kmsKeyName"]);return e!==void 0&&d!=null&&s(e,["encryption_spec","kmsKeyName"],d),t}function sr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],Pt(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],ir(r,t)),t}function rr(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],z(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function lr(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],z(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function ar(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function ur(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],z(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],ar(r,t)),t}function cr(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function fr(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],cr(t,e)),e}function ve(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["model"]);r!=null&&s(e,["model"],r);const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const u=i(n,["expireTime"]);u!=null&&s(e,["expireTime"],u);const f=i(n,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function dr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function pr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>ve(a))),s(e,["cachedContents"],l)}return e}function Ee(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["model"]);r!=null&&s(e,["model"],r);const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const u=i(n,["expireTime"]);u!=null&&s(e,["expireTime"],u);const f=i(n,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function mr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function gr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ee(a))),s(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hr extends O{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Te(Z.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=sr(this.apiClient,e);return u=y("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Ee(d))}else{const c=Ns(this.apiClient,e);return u=y("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>ve(d))}}async get(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=rr(this.apiClient,e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Ee(d))}else{const c=Ds(this.apiClient,e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>ve(d))}}async delete(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=lr(this.apiClient,e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=mr(d),m=new nt;return Object.assign(m,p),m})}else{const c=ws(this.apiClient,e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=dr(d),m=new nt;return Object.assign(m,p),m})}}async update(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=ur(this.apiClient,e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Ee(d))}else{const c=Ls(this.apiClient,e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>ve(d))}}async listInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=fr(e);return u=y("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=gr(d),m=new tt;return Object.assign(m,p),m})}else{const c=Fs(e);return u=y("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=pr(d),m=new tt;return Object.assign(m,p),m})}}}function ut(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(n){return this instanceof k?(this.v=n,this):new k(n)}function ie(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(g){return function(h){return Promise.resolve(h).then(g,p)}}function u(g,h){o[g]&&(r[g]=function(T){return new Promise(function(C,S){l.push([g,T,C,S])>1||f(g,T)})},h&&(r[g]=h(r[g])))}function f(g,h){try{c(o[g](h))}catch(T){m(l[0][3],T)}}function c(g){g.value instanceof k?Promise.resolve(g.value.v).then(d,p):m(l[0][2],g)}function d(g){f("next",g)}function p(g){f("throw",g)}function m(g,h){g(h),l.shift(),l.length&&f(l[0][0],l[0][1])}}function pe(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ut=="function"?ut(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(a){return new Promise(function(u,f){a=n[l](a),r(u,f,a.done,a.value)})}}function r(l,a,u,f){Promise.resolve(f).then(function(c){l({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tr(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Jt(t)}function Jt(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function yr(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ct(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!Jt(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Cr{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new vr(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class vr{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),yr(l)}async sendMessage(e){var t;await this.sendPromise;const o=F(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,a,u;const f=await r,c=(a=(l=f.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,d=f.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];d!=null&&(m=(u=d.slice(p))!==null&&u!==void 0?u:[]);const g=c?[c]:[];this.recordHistory(o,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=F(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?ct(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var o,r;return ie(this,arguments,function*(){var a,u,f,c;const d=[];try{for(var p=!0,m=pe(e),g;g=yield k(m.next()),a=g.done,!a;p=!0){c=g.value,p=!1;const h=c;if(Tr(h)){const T=(r=(o=h.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;T!==void 0&&d.push(T)}yield yield k(h)}}catch(h){u={error:h}}finally{try{!p&&!a&&(f=m.return)&&(yield k(f.call(m)))}finally{if(u)throw u.error}}this.recordHistory(t,d)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ct(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pe extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Pe.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Er(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Sr(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Er(t,e)),e}function _r(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["message"]);o!=null&&s(e,["message"],o);const r=i(n,["code"]);return r!=null&&s(e,["code"],r),e}function Ir(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const f=i(n,["updateTime"]);f!=null&&s(e,["updateTime"],f);const c=i(n,["sha256Hash"]);c!=null&&s(e,["sha256Hash"],c);const d=i(n,["uri"]);d!=null&&s(e,["uri"],d);const p=i(n,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=i(n,["state"]);m!=null&&s(e,["state"],m);const g=i(n,["source"]);g!=null&&s(e,["source"],g);const h=i(n,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const T=i(n,["error"]);return T!=null&&s(e,["error"],_r(T)),e}function Mr(n){const e={},t=i(n,["file"]);t!=null&&s(e,["file"],Ir(t));const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Ar(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","file"],Lt(t));const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Rr(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","file"],Lt(t));const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Pr(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["message"]);o!=null&&s(e,["message"],o);const r=i(n,["code"]);return r!=null&&s(e,["code"],r),e}function $e(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const f=i(n,["updateTime"]);f!=null&&s(e,["updateTime"],f);const c=i(n,["sha256Hash"]);c!=null&&s(e,["sha256Hash"],c);const d=i(n,["uri"]);d!=null&&s(e,["uri"],d);const p=i(n,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=i(n,["state"]);m!=null&&s(e,["state"],m);const g=i(n,["source"]);g!=null&&s(e,["source"],g);const h=i(n,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const T=i(n,["error"]);return T!=null&&s(e,["error"],Pr(T)),e}function xr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>$e(a))),s(e,["files"],l)}return e}function Nr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Dr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wr extends O{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Te(Z.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>$e(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Sr(e);return l=y("files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>{const c=xr(f),d=new Vo;return Object.assign(d,c),d})}}async createInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Mr(e);return l=y("upload/v1beta/files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>{const c=Nr(f),d=new qo;return Object.assign(d,c),d})}}async get(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ar(e);return l=y("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>$e(f))}}async delete(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Rr(e);return l=y("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>{const c=Dr(f),d=new Go;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kr(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Yt(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],kr(t)),e}function Lr(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],Yt(o)),e}function Ur(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Lr(r))),s(e,["speakerVoiceConfigs"],o)}return e}function Fr(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],Yt(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],Ur(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Vr(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function qr(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Gr(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Hr(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function $r(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Vr(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],qr(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Gr(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Hr(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Br(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>$r(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Jr(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function Yr(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Wr(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Yr(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Kr(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function br(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Kr(t)),e}function zr(){return{}}function Xr(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function Qr(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(c=>Jr(c))),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],Wr(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],br(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],zr());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],Xr(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function Zr(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ft(){return{}}function Or(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function jr(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Or(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function el(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function nl(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],el(o)),e}function tl(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function ol(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const f=i(n,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);const c=i(n,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const d=i(n,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Fr(Oe(p)));const m=i(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],Br(F(g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let _=ae(h);Array.isArray(_)&&(_=_.map(x=>Qr(le(x)))),s(e,["setup","tools"],_)}const T=i(n,["sessionResumption"]);e!==void 0&&T!=null&&s(e,["setup","sessionResumption"],Zr(T));const C=i(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&s(e,["setup","inputAudioTranscription"],ft());const S=i(n,["outputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","outputAudioTranscription"],ft());const v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],jr(v));const E=i(n,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],nl(E));const I=i(n,["proactivity"]);return e!==void 0&&I!=null&&s(e,["setup","proactivity"],tl(I)),t}function il(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],P(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],ol(r,t)),t}function sl(){return{}}function rl(){return{}}function ll(n){const e={},t=i(n,["media"]);t!=null&&s(e,["mediaChunks"],xt(t));const o=i(n,["audio"]);o!=null&&s(e,["audio"],Dt(o));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],Nt(l));const a=i(n,["text"]);return a!=null&&s(e,["text"],a),i(n,["activityStart"])!=null&&s(e,["activityStart"],sl()),i(n,["activityEnd"])!=null&&s(e,["activityEnd"],rl()),e}function Wt(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["weight"]);return o!=null&&s(e,["weight"],o),e}function al(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Wt(r))),s(e,["weightedPrompts"],o)}return e}function Kt(n){const e={},t=i(n,["temperature"]);t!=null&&s(e,["temperature"],t);const o=i(n,["topK"]);o!=null&&s(e,["topK"],o);const r=i(n,["seed"]);r!=null&&s(e,["seed"],r);const l=i(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(n,["bpm"]);a!=null&&s(e,["bpm"],a);const u=i(n,["density"]);u!=null&&s(e,["density"],u);const f=i(n,["brightness"]);f!=null&&s(e,["brightness"],f);const c=i(n,["scale"]);c!=null&&s(e,["scale"],c);const d=i(n,["muteBass"]);d!=null&&s(e,["muteBass"],d);const p=i(n,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=i(n,["onlyBassAndDrums"]);m!=null&&s(e,["onlyBassAndDrums"],m);const g=i(n,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function ul(n){const e={},t=i(n,["musicGenerationConfig"]);return t!=null&&s(e,["musicGenerationConfig"],Kt(t)),e}function bt(n){const e={},t=i(n,["model"]);return t!=null&&s(e,["model"],t),e}function zt(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Wt(r))),s(e,["weightedPrompts"],o)}return e}function Be(n){const e={},t=i(n,["setup"]);t!=null&&s(e,["setup"],bt(t));const o=i(n,["clientContent"]);o!=null&&s(e,["clientContent"],zt(o));const r=i(n,["musicGenerationConfig"]);r!=null&&s(e,["musicGenerationConfig"],Kt(r));const l=i(n,["playbackControl"]);return l!=null&&s(e,["playbackControl"],l),e}function cl(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function fl(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],cl(t)),e}function dl(n){const e={},t=i(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],fl(t)),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function pl(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ml(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function gl(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function hl(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Tl(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],pl(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],ml(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],gl(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],hl(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function yl(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Tl(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Cl(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function vl(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function El(n){const e={},t=i(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],vl(t));const o=i(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function Sl(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function _l(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Sl(t)),e}function Il(n){const e={},t=i(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function Ml(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Al(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],Ml(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(n,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function Rl(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],Al(t)),e}function Pl(){return{}}function xl(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function Nl(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Cl(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],El(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],_l(l));const a=i(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],Il(a));const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],Rl(u)),i(n,["urlContext"])!=null&&s(e,["urlContext"],Pl());const c=i(n,["computerUse"]);c!=null&&s(e,["computerUse"],xl(c));const d=i(n,["codeExecution"]);return d!=null&&s(e,["codeExecution"],d),e}function Dl(n){const e={},t=i(n,["handle"]);t!=null&&s(e,["handle"],t);const o=i(n,["transparent"]);return o!=null&&s(e,["transparent"],o),e}function dt(){return{}}function wl(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function kl(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],wl(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function Ll(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function Ul(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Ll(o)),e}function Fl(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function Vl(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const f=i(n,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);const c=i(n,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const d=i(n,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],dl(Oe(p)));const m=i(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],yl(F(g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let _=ae(h);Array.isArray(_)&&(_=_.map(x=>Nl(le(x)))),s(e,["setup","tools"],_)}const T=i(n,["sessionResumption"]);e!==void 0&&T!=null&&s(e,["setup","sessionResumption"],Dl(T));const C=i(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&s(e,["setup","inputAudioTranscription"],dt());const S=i(n,["outputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","outputAudioTranscription"],dt());const v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],kl(v));const E=i(n,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],Ul(E));const I=i(n,["proactivity"]);return e!==void 0&&I!=null&&s(e,["setup","proactivity"],Fl(I)),t}function ql(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],P(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Vl(r,t)),t}function Gl(){return{}}function Hl(){return{}}function $l(n){const e={},t=i(n,["media"]);t!=null&&s(e,["mediaChunks"],xt(t));const o=i(n,["audio"]);o!=null&&s(e,["audio"],Dt(o));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],Nt(l));const a=i(n,["text"]);return a!=null&&s(e,["text"],a),i(n,["activityStart"])!=null&&s(e,["activityStart"],Gl()),i(n,["activityEnd"])!=null&&s(e,["activityEnd"],Hl()),e}function Bl(){return{}}function Jl(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Yl(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Wl(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Xt(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Kl(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Jl(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Yl(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Wl(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Xt(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function bl(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Kl(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function pt(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["finished"]);return o!=null&&s(e,["finished"],o),e}function zl(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Xl(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>zl(r))),s(e,["urlMetadata"],o)}return e}function Ql(n){const e={},t=i(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],bl(t));const o=i(n,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const u=i(n,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],pt(u));const f=i(n,["outputTranscription"]);f!=null&&s(e,["outputTranscription"],pt(f));const c=i(n,["urlContextMetadata"]);c!=null&&s(e,["urlContextMetadata"],Xl(c));const d=i(n,["turnCompleteReason"]);d!=null&&s(e,["turnCompleteReason"],d);const p=i(n,["waitingForInput"]);return p!=null&&s(e,["waitingForInput"],p),e}function Zl(n){const e={},t=i(n,["functionCalls"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Xt(r))),s(e,["functionCalls"],o)}return e}function Ol(n){const e={},t=i(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function ye(n){const e={},t=i(n,["modality"]);t!=null&&s(e,["modality"],t);const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function jl(n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const o=i(n,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(n,["responseTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=i(n,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const f=i(n,["promptTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>ye(g))),s(e,["promptTokensDetails"],m)}const c=i(n,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>ye(g))),s(e,["cacheTokensDetails"],m)}const d=i(n,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>ye(g))),s(e,["responseTokensDetails"],m)}const p=i(n,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>ye(g))),s(e,["toolUsePromptTokensDetails"],m)}return e}function ea(n){const e={},t=i(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function na(n){const e={},t=i(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const o=i(n,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function ta(n){const e={};i(n,["setupComplete"])!=null&&s(e,["setupComplete"],Bl());const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],Ql(o));const r=i(n,["toolCall"]);r!=null&&s(e,["toolCall"],Zl(r));const l=i(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Ol(l));const a=i(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],jl(a));const u=i(n,["goAway"]);u!=null&&s(e,["goAway"],ea(u));const f=i(n,["sessionResumptionUpdate"]);return f!=null&&s(e,["sessionResumptionUpdate"],na(f)),e}function oa(){return{}}function ia(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["weight"]);return o!=null&&s(e,["weight"],o),e}function sa(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ia(r))),s(e,["weightedPrompts"],o)}return e}function ra(n){const e={},t=i(n,["temperature"]);t!=null&&s(e,["temperature"],t);const o=i(n,["topK"]);o!=null&&s(e,["topK"],o);const r=i(n,["seed"]);r!=null&&s(e,["seed"],r);const l=i(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(n,["bpm"]);a!=null&&s(e,["bpm"],a);const u=i(n,["density"]);u!=null&&s(e,["density"],u);const f=i(n,["brightness"]);f!=null&&s(e,["brightness"],f);const c=i(n,["scale"]);c!=null&&s(e,["scale"],c);const d=i(n,["muteBass"]);d!=null&&s(e,["muteBass"],d);const p=i(n,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=i(n,["onlyBassAndDrums"]);m!=null&&s(e,["onlyBassAndDrums"],m);const g=i(n,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function la(n){const e={},t=i(n,["clientContent"]);t!=null&&s(e,["clientContent"],sa(t));const o=i(n,["musicGenerationConfig"]);return o!=null&&s(e,["musicGenerationConfig"],ra(o)),e}function aa(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);o!=null&&s(e,["mimeType"],o);const r=i(n,["sourceMetadata"]);return r!=null&&s(e,["sourceMetadata"],la(r)),e}function ua(n){const e={},t=i(n,["audioChunks"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>aa(r))),s(e,["audioChunks"],o)}return e}function ca(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["filteredReason"]);return o!=null&&s(e,["filteredReason"],o),e}function fa(n){const e={};i(n,["setupComplete"])!=null&&s(e,["setupComplete"],oa());const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],ua(o));const r=i(n,["filteredPrompt"]);return r!=null&&s(e,["filteredPrompt"],ca(r)),e}function da(n){const e={},t=i(n,["sessionId"]);return t!=null&&s(e,["sessionId"],t),e}function pa(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ma(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ga(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Qt(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function ha(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],pa(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],ma(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],ga(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Qt(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Ta(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>ha(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function mt(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["finished"]);return o!=null&&s(e,["finished"],o),e}function ya(n){const e={},t=i(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],Ta(t));const o=i(n,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const u=i(n,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],mt(u));const f=i(n,["outputTranscription"]);f!=null&&s(e,["outputTranscription"],mt(f));const c=i(n,["turnCompleteReason"]);c!=null&&s(e,["turnCompleteReason"],c);const d=i(n,["waitingForInput"]);return d!=null&&s(e,["waitingForInput"],d),e}function Ca(n){const e={},t=i(n,["functionCalls"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Qt(r))),s(e,["functionCalls"],o)}return e}function va(n){const e={},t=i(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function Ce(n){const e={},t=i(n,["modality"]);t!=null&&s(e,["modality"],t);const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function Ea(n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const o=i(n,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(n,["candidatesTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=i(n,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const f=i(n,["promptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(h=>Ce(h))),s(e,["promptTokensDetails"],g)}const c=i(n,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(h=>Ce(h))),s(e,["cacheTokensDetails"],g)}const d=i(n,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(h=>Ce(h))),s(e,["responseTokensDetails"],g)}const p=i(n,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(h=>Ce(h))),s(e,["toolUsePromptTokensDetails"],g)}const m=i(n,["trafficType"]);return m!=null&&s(e,["trafficType"],m),e}function Sa(n){const e={},t=i(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function _a(n){const e={},t=i(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const o=i(n,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function Ia(n){const e={},t=i(n,["setupComplete"]);t!=null&&s(e,["setupComplete"],da(t));const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],ya(o));const r=i(n,["toolCall"]);r!=null&&s(e,["toolCall"],Ca(r));const l=i(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],va(l));const a=i(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],Ea(a));const u=i(n,["goAway"]);u!=null&&s(e,["goAway"],Sa(u));const f=i(n,["sessionResumptionUpdate"]);return f!=null&&s(e,["sessionResumptionUpdate"],_a(f)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ma(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Aa(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ra(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Pa(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function xa(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Ma(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Aa(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Ra(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Pa(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function xe(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>xa(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Na(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const u=i(n,["format"]);u!=null&&s(e,["format"],u);const f=i(n,["items"]);f!=null&&s(e,["items"],f);const c=i(n,["maxItems"]);c!=null&&s(e,["maxItems"],c);const d=i(n,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=i(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(n,["minLength"]);h!=null&&s(e,["minLength"],h);const T=i(n,["minProperties"]);T!=null&&s(e,["minProperties"],T);const C=i(n,["minimum"]);C!=null&&s(e,["minimum"],C);const S=i(n,["nullable"]);S!=null&&s(e,["nullable"],S);const v=i(n,["pattern"]);v!=null&&s(e,["pattern"],v);const E=i(n,["properties"]);E!=null&&s(e,["properties"],E);const I=i(n,["propertyOrdering"]);I!=null&&s(e,["propertyOrdering"],I);const _=i(n,["required"]);_!=null&&s(e,["required"],_);const x=i(n,["title"]);x!=null&&s(e,["title"],x);const N=i(n,["type"]);return N!=null&&s(e,["type"],N),e}function Da(n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&s(e,["category"],t);const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function wa(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function ka(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function La(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],ka(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Ua(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Fa(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Ua(t)),e}function Va(){return{}}function qa(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function Ga(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(c=>wa(c))),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],La(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Fa(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Va());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],qa(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function Ha(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function $a(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Ba(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],$a(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Ja(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Ha(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Ba(o)),e}function Ya(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Zt(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Ya(t)),e}function Wa(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],Zt(o)),e}function Ka(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Wa(r))),s(e,["speakerVoiceConfigs"],o)}return e}function ba(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],Zt(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],Ka(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function za(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Xa(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],xe(F(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const f=i(e,["candidateCount"]);f!=null&&s(o,["candidateCount"],f);const c=i(e,["maxOutputTokens"]);c!=null&&s(o,["maxOutputTokens"],c);const d=i(e,["stopSequences"]);d!=null&&s(o,["stopSequences"],d);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const T=i(e,["seed"]);T!=null&&s(o,["seed"],T);const C=i(e,["responseMimeType"]);C!=null&&s(o,["responseMimeType"],C);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],Na(Qe(S)));const v=i(e,["responseJsonSchema"]);if(v!=null&&s(o,["responseJsonSchema"],v),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=i(e,["safetySettings"]);if(t!==void 0&&E!=null){let D=E;Array.isArray(D)&&(D=D.map(B=>Da(B))),s(t,["safetySettings"],D)}const I=i(e,["tools"]);if(t!==void 0&&I!=null){let D=ae(I);Array.isArray(D)&&(D=D.map(B=>Ga(le(B)))),s(t,["tools"],D)}const _=i(e,["toolConfig"]);if(t!==void 0&&_!=null&&s(t,["toolConfig"],Ja(_)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=i(e,["cachedContent"]);t!==void 0&&x!=null&&s(t,["cachedContent"],z(n,x));const N=i(e,["responseModalities"]);N!=null&&s(o,["responseModalities"],N);const U=i(e,["mediaResolution"]);U!=null&&s(o,["mediaResolution"],U);const A=i(e,["speechConfig"]);if(A!=null&&s(o,["speechConfig"],ba(Ze(A))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const w=i(e,["thinkingConfig"]);return w!=null&&s(o,["thinkingConfig"],za(w)),o}function gt(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["contents"]);if(r!=null){let a=G(r);Array.isArray(a)&&(a=a.map(u=>xe(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],Xa(n,l,t)),t}function Qa(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Za(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["contents"]);r!=null&&s(t,["requests[]","content"],Xe(n,r));const l=i(e,["config"]);l!=null&&s(t,["config"],Qa(l,t));const a=i(e,["model"]);return a!==void 0&&s(t,["requests[]","model"],P(n,a)),t}function Oa(n,e){const t={};if(i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const l=i(n,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const u=i(n,["personGeneration"]);e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u);const f=i(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&s(e,["parameters","includeSafetyAttributes"],f);const c=i(n,["includeRaiReason"]);e!==void 0&&c!=null&&s(e,["parameters","includeRaiReason"],c);const d=i(n,["language"]);e!==void 0&&d!=null&&s(e,["parameters","language"],d);const p=i(n,["outputMimeType"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","mimeType"],p);const m=i(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m),i(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const g=i(n,["imageSize"]);if(e!==void 0&&g!=null&&s(e,["parameters","sampleImageSize"],g),i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function ja(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&s(t,["config"],Oa(l,t)),t}function eu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],P(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function nu(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=i(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],Ut(n,u)),o}function tu(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],nu(n,o,t)),t}function ou(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function iu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],P(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],ou(r,t)),t}function su(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],P(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function ru(n){const e={};if(i(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function lu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["contents"]);if(r!=null){let a=G(r);Array.isArray(a)&&(a=a.map(u=>xe(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["config"],ru(l)),t}function Ot(n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=i(n,["imageBytes"]);t!=null&&s(e,["bytesBase64Encoded"],j(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function au(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);if(e!==void 0&&r!=null&&s(e,["instances[0]","image"],Ot(r)),i(n,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return t}function uu(n,e){const t={},o=i(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o),i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=i(n,["durationSeconds"]);if(e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(n,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);const a=i(n,["resolution"]);e!==void 0&&a!=null&&s(e,["parameters","resolution"],a);const u=i(n,["personGeneration"]);if(e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u),i(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=i(n,["negativePrompt"]);e!==void 0&&f!=null&&s(e,["parameters","negativePrompt"],f);const c=i(n,["enhancePrompt"]);if(e!==void 0&&c!=null&&s(e,["parameters","enhancePrompt"],c),i(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(i(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(i(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(i(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(i(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function cu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);if(l!=null&&s(t,["instances[0]","image"],Ot(l)),i(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=i(e,["source"]);a!=null&&s(t,["config"],au(a,t));const u=i(e,["config"]);return u!=null&&s(t,["config"],uu(u,t)),t}function fu(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function du(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function pu(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function mu(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function gu(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],fu(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],du(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],pu(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],mu(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function ce(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>gu(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function hu(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const u=i(n,["format"]);u!=null&&s(e,["format"],u);const f=i(n,["items"]);f!=null&&s(e,["items"],f);const c=i(n,["maxItems"]);c!=null&&s(e,["maxItems"],c);const d=i(n,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=i(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(n,["minLength"]);h!=null&&s(e,["minLength"],h);const T=i(n,["minProperties"]);T!=null&&s(e,["minProperties"],T);const C=i(n,["minimum"]);C!=null&&s(e,["minimum"],C);const S=i(n,["nullable"]);S!=null&&s(e,["nullable"],S);const v=i(n,["pattern"]);v!=null&&s(e,["pattern"],v);const E=i(n,["properties"]);E!=null&&s(e,["properties"],E);const I=i(n,["propertyOrdering"]);I!=null&&s(e,["propertyOrdering"],I);const _=i(n,["required"]);_!=null&&s(e,["required"],_);const x=i(n,["title"]);x!=null&&s(e,["title"],x);const N=i(n,["type"]);return N!=null&&s(e,["type"],N),e}function Tu(n){const e={},t=i(n,["featureSelectionPreference"]);return t!=null&&s(e,["featureSelectionPreference"],t),e}function yu(n){const e={},t=i(n,["method"]);t!=null&&s(e,["method"],t);const o=i(n,["category"]);o!=null&&s(e,["category"],o);const r=i(n,["threshold"]);return r!=null&&s(e,["threshold"],r),e}function Cu(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function vu(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Eu(n){const e={},t=i(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],vu(t));const o=i(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function Su(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function _u(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Su(t)),e}function Iu(n){const e={},t=i(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function Mu(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Au(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],Mu(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(n,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function Ru(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],Au(t)),e}function Pu(){return{}}function xu(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function jt(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Cu(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],Eu(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],_u(l));const a=i(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],Iu(a));const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],Ru(u)),i(n,["urlContext"])!=null&&s(e,["urlContext"],Pu());const c=i(n,["computerUse"]);c!=null&&s(e,["computerUse"],xu(c));const d=i(n,["codeExecution"]);return d!=null&&s(e,["codeExecution"],d),e}function Nu(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Du(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function wu(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],Du(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function ku(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Nu(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],wu(o)),e}function Lu(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Uu(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Lu(t)),e}function Fu(n){const e={},t=i(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],Uu(t)),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Vu(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function qu(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],ce(F(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const f=i(e,["candidateCount"]);f!=null&&s(o,["candidateCount"],f);const c=i(e,["maxOutputTokens"]);c!=null&&s(o,["maxOutputTokens"],c);const d=i(e,["stopSequences"]);d!=null&&s(o,["stopSequences"],d);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const T=i(e,["seed"]);T!=null&&s(o,["seed"],T);const C=i(e,["responseMimeType"]);C!=null&&s(o,["responseMimeType"],C);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],hu(Qe(S)));const v=i(e,["responseJsonSchema"]);v!=null&&s(o,["responseJsonSchema"],v);const E=i(e,["routingConfig"]);E!=null&&s(o,["routingConfig"],E);const I=i(e,["modelSelectionConfig"]);I!=null&&s(o,["modelConfig"],Tu(I));const _=i(e,["safetySettings"]);if(t!==void 0&&_!=null){let W=_;Array.isArray(W)&&(W=W.map(ke=>yu(ke))),s(t,["safetySettings"],W)}const x=i(e,["tools"]);if(t!==void 0&&x!=null){let W=ae(x);Array.isArray(W)&&(W=W.map(ke=>jt(le(ke)))),s(t,["tools"],W)}const N=i(e,["toolConfig"]);t!==void 0&&N!=null&&s(t,["toolConfig"],ku(N));const U=i(e,["labels"]);t!==void 0&&U!=null&&s(t,["labels"],U);const A=i(e,["cachedContent"]);t!==void 0&&A!=null&&s(t,["cachedContent"],z(n,A));const w=i(e,["responseModalities"]);w!=null&&s(o,["responseModalities"],w);const D=i(e,["mediaResolution"]);D!=null&&s(o,["mediaResolution"],D);const B=i(e,["speechConfig"]);B!=null&&s(o,["speechConfig"],Fu(Ze(B)));const tn=i(e,["audioTimestamp"]);tn!=null&&s(o,["audioTimestamp"],tn);const on=i(e,["thinkingConfig"]);return on!=null&&s(o,["thinkingConfig"],Vu(on)),o}function ht(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["contents"]);if(r!=null){let a=G(r);Array.isArray(a)&&(a=a.map(u=>ce(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],qu(n,l,t)),t}function Gu(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["instances[]","task_type"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["instances[]","title"],r);const l=i(n,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const a=i(n,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const u=i(n,["autoTruncate"]);return e!==void 0&&u!=null&&s(e,["parameters","autoTruncate"],u),t}function Hu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["contents"]);r!=null&&s(t,["instances[]","content"],Xe(n,r));const l=i(e,["config"]);return l!=null&&s(t,["config"],Gu(l,t)),t}function $u(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(n,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);const c=i(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&s(e,["parameters","safetySetting"],c);const d=i(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=i(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=i(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=i(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const T=i(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&s(e,["parameters","outputOptions","compressionQuality"],T);const C=i(n,["addWatermark"]);e!==void 0&&C!=null&&s(e,["parameters","addWatermark"],C);const S=i(n,["imageSize"]);e!==void 0&&S!=null&&s(e,["parameters","sampleImageSize"],S);const v=i(n,["enhancePrompt"]);return e!==void 0&&v!=null&&s(e,["parameters","enhancePrompt"],v),t}function Bu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&s(t,["config"],$u(l,t)),t}function $(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["imageBytes"]);o!=null&&s(e,["bytesBase64Encoded"],j(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ju(n){const e={},t=i(n,["maskMode"]);t!=null&&s(e,["maskMode"],t);const o=i(n,["segmentationClasses"]);o!=null&&s(e,["maskClasses"],o);const r=i(n,["maskDilation"]);return r!=null&&s(e,["dilation"],r),e}function Yu(n){const e={},t=i(n,["controlType"]);t!=null&&s(e,["controlType"],t);const o=i(n,["enableControlImageComputation"]);return o!=null&&s(e,["computeControl"],o),e}function Wu(n){const e={},t=i(n,["styleDescription"]);return t!=null&&s(e,["styleDescription"],t),e}function Ku(n){const e={},t=i(n,["subjectType"]);t!=null&&s(e,["subjectType"],t);const o=i(n,["subjectDescription"]);return o!=null&&s(e,["subjectDescription"],o),e}function bu(n){const e={},t=i(n,["referenceImage"]);t!=null&&s(e,["referenceImage"],$(t));const o=i(n,["referenceId"]);o!=null&&s(e,["referenceId"],o);const r=i(n,["referenceType"]);r!=null&&s(e,["referenceType"],r);const l=i(n,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],Ju(l));const a=i(n,["controlImageConfig"]);a!=null&&s(e,["controlImageConfig"],Yu(a));const u=i(n,["styleImageConfig"]);u!=null&&s(e,["styleImageConfig"],Wu(u));const f=i(n,["subjectImageConfig"]);return f!=null&&s(e,["subjectImageConfig"],Ku(f)),e}function zu(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(n,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);const c=i(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&s(e,["parameters","safetySetting"],c);const d=i(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=i(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=i(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=i(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const T=i(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&s(e,["parameters","outputOptions","compressionQuality"],T);const C=i(n,["addWatermark"]);e!==void 0&&C!=null&&s(e,["parameters","addWatermark"],C);const S=i(n,["editMode"]);e!==void 0&&S!=null&&s(e,["parameters","editMode"],S);const v=i(n,["baseSteps"]);return e!==void 0&&v!=null&&s(e,["parameters","editConfig","baseSteps"],v),t}function Xu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>bu(f))),s(t,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&s(t,["config"],zu(a,t)),t}function Qu(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["includeRaiReason"]);e!==void 0&&r!=null&&s(e,["parameters","includeRaiReason"],r);const l=i(n,["outputMimeType"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","mimeType"],l);const a=i(n,["outputCompressionQuality"]);e!==void 0&&a!=null&&s(e,["parameters","outputOptions","compressionQuality"],a);const u=i(n,["enhanceInputImage"]);e!==void 0&&u!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],u);const f=i(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const c=i(n,["numberOfImages"]);e!==void 0&&c!=null&&s(e,["parameters","sampleCount"],c);const d=i(n,["mode"]);return e!==void 0&&d!=null&&s(e,["parameters","mode"],d),t}function Zu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["image"]);r!=null&&s(t,["instances[0]","image"],$(r));const l=i(e,["upscaleFactor"]);l!=null&&s(t,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&s(t,["config"],Qu(a,t)),t}function Ou(n){const e={},t=i(n,["productImage"]);return t!=null&&s(e,["image"],$(t)),e}function ju(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["personImage"]);e!==void 0&&r!=null&&s(e,["instances[0]","personImage","image"],$(r));const l=i(n,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>Ou(u))),s(e,["instances[0]","productImages"],a)}return t}function ec(n,e){const t={},o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["baseSteps"]);e!==void 0&&r!=null&&s(e,["parameters","editConfig","baseSteps"],r);const l=i(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const a=i(n,["seed"]);e!==void 0&&a!=null&&s(e,["parameters","seed"],a);const u=i(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const c=i(n,["addWatermark"]);e!==void 0&&c!=null&&s(e,["parameters","addWatermark"],c);const d=i(n,["outputMimeType"]);e!==void 0&&d!=null&&s(e,["parameters","outputOptions","mimeType"],d);const p=i(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","compressionQuality"],p);const m=i(n,["enhancePrompt"]);return e!==void 0&&m!=null&&s(e,["parameters","enhancePrompt"],m),t}function nc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["source"]);r!=null&&s(t,["config"],ju(r,t));const l=i(e,["config"]);return l!=null&&s(t,["config"],ec(l,t)),t}function tc(n){const e={},t=i(n,["image"]);return t!=null&&s(e,["image"],$(t)),e}function oc(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],$(r));const l=i(n,["scribbleImage"]);return e!==void 0&&l!=null&&s(e,["instances[0]","scribble"],tc(l)),t}function ic(n,e){const t={},o=i(n,["mode"]);e!==void 0&&o!=null&&s(e,["parameters","mode"],o);const r=i(n,["maxPredictions"]);e!==void 0&&r!=null&&s(e,["parameters","maxPredictions"],r);const l=i(n,["confidenceThreshold"]);e!==void 0&&l!=null&&s(e,["parameters","confidenceThreshold"],l);const a=i(n,["maskDilation"]);e!==void 0&&a!=null&&s(e,["parameters","maskDilation"],a);const u=i(n,["binaryColorThreshold"]);return e!==void 0&&u!=null&&s(e,["parameters","binaryColorThreshold"],u),t}function sc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["source"]);r!=null&&s(t,["config"],oc(r,t));const l=i(e,["config"]);return l!=null&&s(t,["config"],ic(l,t)),t}function rc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],P(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function lc(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=i(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],Ut(n,u)),o}function ac(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],lc(n,o,t)),t}function uc(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function cc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],uc(r,t)),t}function fc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],P(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function dc(n,e){const t={},o=i(n,["systemInstruction"]);e!==void 0&&o!=null&&s(e,["systemInstruction"],ce(F(o)));const r=i(n,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>jt(u))),s(e,["tools"],a)}const l=i(n,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],l),t}function pc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["contents"]);if(r!=null){let a=G(r);Array.isArray(a)&&(a=a.map(u=>ce(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["config"],dc(l,t)),t}function mc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["contents"]);if(r!=null){let a=G(r);Array.isArray(a)&&(a=a.map(u=>ce(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["config"],l),t}function eo(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["videoBytes"]);o!=null&&s(e,["bytesBase64Encoded"],j(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function gc(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],$(r));const l=i(n,["video"]);return e!==void 0&&l!=null&&s(e,["instances[0]","video"],eo(l)),t}function hc(n){const e={},t=i(n,["image"]);t!=null&&s(e,["image"],$(t));const o=i(n,["referenceType"]);return o!=null&&s(e,["referenceType"],o),e}function Tc(n){const e={},t=i(n,["image"]);t!=null&&s(e,["_self"],$(t));const o=i(n,["maskMode"]);return o!=null&&s(e,["maskMode"],o),e}function yc(n,e){const t={},o=i(n,["numberOfVideos"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);const l=i(n,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const a=i(n,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const u=i(n,["seed"]);e!==void 0&&u!=null&&s(e,["parameters","seed"],u);const f=i(n,["aspectRatio"]);e!==void 0&&f!=null&&s(e,["parameters","aspectRatio"],f);const c=i(n,["resolution"]);e!==void 0&&c!=null&&s(e,["parameters","resolution"],c);const d=i(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=i(n,["pubsubTopic"]);e!==void 0&&p!=null&&s(e,["parameters","pubsubTopic"],p);const m=i(n,["negativePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","negativePrompt"],m);const g=i(n,["enhancePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g);const h=i(n,["generateAudio"]);e!==void 0&&h!=null&&s(e,["parameters","generateAudio"],h);const T=i(n,["lastFrame"]);e!==void 0&&T!=null&&s(e,["instances[0]","lastFrame"],$(T));const C=i(n,["referenceImages"]);if(e!==void 0&&C!=null){let E=C;Array.isArray(E)&&(E=E.map(I=>hc(I))),s(e,["instances[0]","referenceImages"],E)}const S=i(n,["mask"]);e!==void 0&&S!=null&&s(e,["instances[0]","mask"],Tc(S));const v=i(n,["compressionQuality"]);return e!==void 0&&v!=null&&s(e,["parameters","compressionQuality"],v),t}function Cc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],P(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);l!=null&&s(t,["instances[0]","image"],$(l));const a=i(e,["video"]);a!=null&&s(t,["instances[0]","video"],eo(a));const u=i(e,["source"]);u!=null&&s(t,["config"],gc(u,t));const f=i(e,["config"]);return f!=null&&s(t,["config"],yc(f,t)),t}function vc(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ec(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Sc(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function _c(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Ic(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],vc(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Ec(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Sc(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],_c(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Mc(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Ic(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ac(n){const e={},t=i(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function Rc(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Pc(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Rc(r))),s(e,["urlMetadata"],o)}return e}function xc(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],Mc(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Ac(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Pc(a));const u=i(n,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const f=i(n,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const d=i(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Tt(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(c=>xc(c))),s(e,["candidates"],f)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function Nc(n){const e={},t=i(n,["values"]);return t!=null&&s(e,["values"],t),e}function Dc(){return{}}function wc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Nc(a))),s(e,["embeddings"],l)}return i(n,["metadata"])!=null&&s(e,["metadata"],Dc()),e}function kc(n){const e={},t=i(n,["bytesBase64Encoded"]);t!=null&&s(e,["imageBytes"],j(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function no(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function Lc(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],kc(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);return r!=null&&s(e,["safetyAttributes"],no(r)),e}function Uc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Lc(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],no(r)),e}function Fc(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Je(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["version"]);l!=null&&s(e,["version"],l);const a=i(n,["_self"]);a!=null&&s(e,["tunedModelInfo"],Fc(a));const u=i(n,["inputTokenLimit"]);u!=null&&s(e,["inputTokenLimit"],u);const f=i(n,["outputTokenLimit"]);f!=null&&s(e,["outputTokenLimit"],f);const c=i(n,["supportedGenerationMethods"]);return c!=null&&s(e,["supportedActions"],c),e}function Vc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=Ft(r);Array.isArray(l)&&(l=l.map(a=>Je(a))),s(e,["models"],l)}return e}function qc(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Gc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);o!=null&&s(e,["totalTokens"],o);const r=i(n,["cachedContentTokenCount"]);return r!=null&&s(e,["cachedContentTokenCount"],r),e}function Hc(n){const e={},t=i(n,["video","uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],j(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function $c(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Hc(t)),e}function Bc(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>$c(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Jc(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],Bc(a)),e}function Yc(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Wc(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Kc(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function bc(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function zc(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Yc(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Wc(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Kc(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],bc(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Xc(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>zc(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Qc(n){const e={},t=i(n,["citations"]);return t!=null&&s(e,["citations"],t),e}function Zc(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Oc(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Zc(r))),s(e,["urlMetadata"],o)}return e}function jc(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],Xc(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Qc(o));const r=i(n,["finishMessage"]);r!=null&&s(e,["finishMessage"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Oc(a));const u=i(n,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const f=i(n,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const d=i(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function yt(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>jc(d))),s(e,["candidates"],c)}const r=i(n,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(n,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const a=i(n,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const u=i(n,["responseId"]);u!=null&&s(e,["responseId"],u);const f=i(n,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function ef(n){const e={},t=i(n,["truncated"]);t!=null&&s(e,["truncated"],t);const o=i(n,["token_count"]);return o!=null&&s(e,["tokenCount"],o),e}function nf(n){const e={},t=i(n,["values"]);t!=null&&s(e,["values"],t);const o=i(n,["statistics"]);return o!=null&&s(e,["statistics"],ef(o)),e}function tf(n){const e={},t=i(n,["billableCharacterCount"]);return t!=null&&s(e,["billableCharacterCount"],t),e}function of(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>nf(a))),s(e,["embeddings"],l)}const r=i(n,["metadata"]);return r!=null&&s(e,["metadata"],tf(r)),e}function to(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["imageBytes"],j(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function oo(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function Ne(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],to(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);r!=null&&s(e,["safetyAttributes"],oo(r));const l=i(n,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function sf(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Ne(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],oo(r)),e}function rf(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Ne(l))),s(e,["generatedImages"],r)}return e}function lf(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Ne(l))),s(e,["generatedImages"],r)}return e}function af(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Ne(r))),s(e,["generatedImages"],o)}return e}function uf(n){const e={},t=i(n,["label"]);t!=null&&s(e,["label"],t);const o=i(n,["score"]);return o!=null&&s(e,["score"],o),e}function cf(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["mask"],to(t));const o=i(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>uf(l))),s(e,["labels"],r)}return e}function ff(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>cf(r))),s(e,["generatedMasks"],o)}return e}function df(n){const e={},t=i(n,["endpoint"]);t!=null&&s(e,["name"],t);const o=i(n,["deployedModelId"]);return o!=null&&s(e,["deployedModelId"],o),e}function pf(n){const e={},t=i(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function mf(n){const e={},t=i(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const o=i(n,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(n,["step"]);return r!=null&&s(e,["step"],r),e}function Ye(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["versionId"]);l!=null&&s(e,["version"],l);const a=i(n,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>df(m))),s(e,["endpoints"],p)}const u=i(n,["labels"]);u!=null&&s(e,["labels"],u);const f=i(n,["_self"]);f!=null&&s(e,["tunedModelInfo"],pf(f));const c=i(n,["defaultCheckpointId"]);c!=null&&s(e,["defaultCheckpointId"],c);const d=i(n,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>mf(m))),s(e,["checkpoints"],p)}return e}function gf(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=Ft(r);Array.isArray(l)&&(l=l.map(a=>Ye(a))),s(e,["models"],l)}return e}function hf(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Tf(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);return o!=null&&s(e,["totalTokens"],o),e}function yf(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["tokensInfo"]);return o!=null&&s(e,["tokensInfo"],o),e}function Cf(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],j(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function vf(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Cf(t)),e}function Ef(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>vf(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Sf(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],Ef(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _f="Content-Type",If="X-Server-Timeout",Mf="User-Agent",We="x-goog-api-client",Af="1.20.0",Rf=`google-genai-sdk/${Af}`,Pf="v1beta1",xf="v1beta",Ct=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Nf{constructor(e){var t,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Pf,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:xf,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o){if(t&&t.timeout||o){const r=new AbortController,l=r.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const a=setTimeout(()=>r.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),e.signal=l}return t&&t.extraBody!==null&&Df(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await vt(r),new qe(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await vt(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return ie(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:f}=yield k(r.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=l.decode(f,{stream:!0});try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,h=m.code,T=`got status: ${g}. ${JSON.stringify(p)}`;if(h>=400&&h<600)throw new Pe({message:T,status:h})}}catch(p){if(p.name==="ApiError")throw p}a+=c;let d=a.match(Ct);for(;d;){const p=d[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield k(new qe(m)),a=a.slice(d[0].length),d=a.match(Ct)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=Rf+" "+this.clientOptions.userAgentExtra;return e[Mf]=t,e[We]=t,e[_f]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[o,r]of Object.entries(e.headers))t.append(o,r);e.timeout&&e.timeout>0&&t.append(If,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);r.sizeBytes=String(a.size);const u=(o=t==null?void 0:t.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const f=await this.fetchUploadUrl(r,t);return l.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var o;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:y("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(o=a==null?void 0:a.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function vt(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new Pe({message:r,status:t}):new Error(r)}}function Df(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const u=Object.assign({},l);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f)){const c=a[f],d=u[f];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?u[f]=o(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),u[f]=c)}return u}const r=o(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wf="mcp_used/unknown";let kf=!1;function io(n){for(const e of n)if(Lf(e)||typeof e=="object"&&"inputSchema"in e)return!0;return kf}function so(n){var e;const t=(e=n[We])!==null&&e!==void 0?e:"";n[We]=(t+` ${wf}`).trimStart()}function Lf(n){return n!==null&&typeof n=="object"&&n instanceof en}function Uf(n,e=100){return ie(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield k(n.listTools({cursor:o}));for(const a of l.tools)yield yield k(a),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class en{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new en(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},a=[];for(const d of this.mcpClients)try{for(var u=!0,f=(t=void 0,pe(Uf(d))),c;c=await f.next(),e=c.done,!e;u=!0){r=c.value,u=!1;const p=r;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=d}}catch(p){t={error:p}}finally{try{!u&&!e&&(o=f.return)&&await o.call(f)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Xo(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Ff(n,e,t){const o=new $o;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const l=fa(r);Object.assign(o,l),e(o)}class Vf{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=Hf(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const d=new Promise(E=>{c=E}),p=e.callbacks,m=function(){c({})},g=this.apiClient,h={onopen:m,onmessage:E=>{Ff(g,p.onmessage,E)},onerror:(t=p==null?void 0:p.onerror)!==null&&t!==void 0?t:function(E){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(E){}},T=this.webSocketFactory.create(f,Gf(a),h);T.connect(),await d;const C=P(this.apiClient,e.model),S=bt({model:C}),v=Be({setup:S});return T.send(JSON.stringify(v)),new qf(T,this.apiClient)}}class qf{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=al(e),o=zt(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=ul(e),o=Be(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const t=Be({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(te.PLAY)}pause(){this.sendPlaybackControl(te.PAUSE)}stop(){this.sendPlaybackControl(te.STOP)}resetContext(){this.sendPlaybackControl(te.RESET_CONTEXT)}close(){this.conn.close()}}function Gf(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function Hf(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $f="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Bf(n,e,t){const o=new Ho;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const a=Ia(l);Object.assign(o,a)}else{const a=ta(l);Object.assign(o,a)}e(o)}class Jf{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new Vf(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&io(e.config.tools)&&so(p);const m=bf(p);if(this.apiClient.isVertexAI())d=`${f}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const A=this.apiClient.getApiKey();let w="BidiGenerateContent",D="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),w="BidiGenerateContentConstrained",D="access_token"),d=`${f}/ws/google.ai.generativelanguage.${c}.GenerativeService.${w}?${D}=${A}`}let g=()=>{};const h=new Promise(A=>{g=A}),T=e.callbacks,C=function(){var A;(A=T==null?void 0:T.onopen)===null||A===void 0||A.call(T),g({})},S=this.apiClient,v={onopen:C,onmessage:A=>{Bf(S,T.onmessage,A)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(A){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(A){}},E=this.webSocketFactory.create(d,Kf(m),v);E.connect(),await h;let I=P(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const A=this.apiClient.getProject(),w=this.apiClient.getLocation();I=`projects/${A}/locations/${w}/`+I}let _={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Me.AUDIO]}:e.config.responseModalities=[Me.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const x=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],N=[];for(const A of x)if(this.isCallableTool(A)){const w=A;N.push(await w.tool())}else N.push(A);N.length>0&&(e.config.tools=N);const U={model:I,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?_=ql(this.apiClient,U):_=il(this.apiClient,U),delete _.config,E.send(JSON.stringify(_)),new Wf(E,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Yf={turnComplete:!0};class Wf{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=G(t.turns),e.isVertexAI()?o=o.map(r=>ce(r)):o=o.map(r=>xe(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error($f)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Yf),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:$l(e)}:t={realtimeInput:ll(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Kf(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function bf(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Et=10;function St(n){var e,t,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(se(a)){r=!0;break}if(!r)return!0;const l=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function se(n){return"callTool"in n&&typeof n.callTool=="function"}function zf(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>se(r)))!==null&&o!==void 0?o:!1}function Xf(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!se(r)))!==null&&o!==void 0?o:!1}function _t(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qf extends O{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,a,u;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!zf(t)||St(t.config))return await this.generateContentInternal(f);if(Xf(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,d;const p=G(f.contents),m=(l=(r=(o=f.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:Et;let g=0;for(;g<m&&(c=await this.generateContentInternal(f),!(!c.functionCalls||c.functionCalls.length===0));){const h=c.candidates[0].content,T=[];for(const C of(u=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(se(C)){const v=await C.callTool(c.functionCalls);T.push(...v)}g++,d={role:"user",parts:T},f.contents=G(f.contents),f.contents.push(h),f.contents.push(d),_t(f.config)&&(p.push(h),p.push(d))}return _t(f.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),St(t.config)){const o=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const a=[];if(o!=null&&o.generatedImages)for(const f of o.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((r=f==null?void 0:f.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=f==null?void 0:f.safetyAttributes:a.push(f);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async t=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Te(Z.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const a=await Promise.all(l.map(async f=>se(f)?await f.tool():f)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&io(e.config.tools)){const f=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},f);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),so(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const a of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(se(a)){const u=a,f=await u.tool();for(const c of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(l.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);l.set(c.name,u)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Et;let a=!1,u=0;const f=await this.initAfcToolsMap(e);return(function(c,d,p){var m,g;return ie(this,arguments,function*(){for(var h,T,C,S;u<l;){a&&(u++,a=!1);const _=yield k(c.processParamsMaybeAddMcpUsage(p)),x=yield k(c.generateContentStreamInternal(_)),N=[],U=[];try{for(var v=!0,E=(T=void 0,pe(x)),I;I=yield k(E.next()),h=I.done,!h;v=!0){S=I.value,v=!1;const A=S;if(yield yield k(A),A.candidates&&(!((m=A.candidates[0])===null||m===void 0)&&m.content)){U.push(A.candidates[0].content);for(const w of(g=A.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(u<l&&w.functionCall){if(!w.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(w.functionCall.name)){const D=yield k(d.get(w.functionCall.name).callTool([w.functionCall]));N.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${w.functionCall.name}`)}}}}catch(A){T={error:A}}finally{try{!v&&!h&&(C=E.return)&&(yield k(C.call(E)))}finally{if(T)throw T.error}}if(N.length>0){a=!0;const A=new fe;A.candidates=[{content:{role:"user",parts:N}}],yield yield k(A);const w=[];w.push(...U),w.push({role:"user",parts:N});const D=G(p.contents).concat(w);p.contents=D}else break}})})(this,f,e)}async generateContentInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=ht(this.apiClient,e);return u=y("{model}:generateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=yt(d),m=new fe;return Object.assign(m,p),m})}else{const c=gt(this.apiClient,e);return u=y("{model}:generateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Tt(d),m=new fe;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=ht(this.apiClient,e);return u=y("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return ie(this,arguments,function*(){var m,g,h,T;try{for(var C=!0,S=pe(p),v;v=yield k(S.next()),m=v.done,!m;C=!0){T=v.value,C=!1;const E=T,I=yt(yield k(E.json()));I.sdkHttpResponse={headers:E.headers};const _=new fe;Object.assign(_,I),yield yield k(_)}}catch(E){g={error:E}}finally{try{!C&&!m&&(h=S.return)&&(yield k(h.call(S)))}finally{if(g)throw g.error}}})})}else{const c=gt(this.apiClient,e);return u=y("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return ie(this,arguments,function*(){var m,g,h,T;try{for(var C=!0,S=pe(p),v;v=yield k(S.next()),m=v.done,!m;C=!0){T=v.value,C=!1;const E=T,I=Tt(yield k(E.json()));I.sdkHttpResponse={headers:E.headers};const _=new fe;Object.assign(_,I),yield yield k(_)}}catch(E){g={error:E}}finally{try{!C&&!m&&(h=S.return)&&(yield k(h.call(S)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Hu(this.apiClient,e);return u=y("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=of(d),m=new Xn;return Object.assign(m,p),m})}else{const c=Za(this.apiClient,e);return u=y("{model}:batchEmbedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=wc(d),m=new Xn;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Bu(this.apiClient,e);return u=y("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=sf(d),m=new Qn;return Object.assign(m,p),m})}else{const c=ja(this.apiClient,e);return u=y("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Uc(d),m=new Qn;return Object.assign(m,p),m})}}async editImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Xu(this.apiClient,e);return l=y("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>{const c=rf(f),d=new wo;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Zu(this.apiClient,e);return l=y("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>{const c=lf(f),d=new ko;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=nc(this.apiClient,e);return l=y("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>{const c=af(f),d=new Lo;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=sc(this.apiClient,e);return l=y("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>{const c=ff(f),d=new Uo;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=rc(this.apiClient,e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Ye(d))}else{const c=eu(this.apiClient,e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Je(d))}}async listInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=ac(this.apiClient,e);return u=y("{models_url}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=gf(d),m=new Zn;return Object.assign(m,p),m})}else{const c=tu(this.apiClient,e);return u=y("{models_url}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Vc(d),m=new Zn;return Object.assign(m,p),m})}}async update(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=cc(this.apiClient,e);return u=y("{model}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Ye(d))}else{const c=iu(this.apiClient,e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Je(d))}}async delete(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=fc(this.apiClient,e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=hf(d),m=new On;return Object.assign(m,p),m})}else{const c=su(this.apiClient,e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=qc(d),m=new On;return Object.assign(m,p),m})}}async countTokens(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=pc(this.apiClient,e);return u=y("{model}:countTokens",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Tf(d),m=new jn;return Object.assign(m,p),m})}else{const c=lu(this.apiClient,e);return u=y("{model}:countTokens",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Gc(d),m=new jn;return Object.assign(m,p),m})}}async computeTokens(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=mc(this.apiClient,e);return l=y("{model}:computeTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>{const c=yf(f),d=new Fo;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Cc(this.apiClient,e);return u=y("{model}:predictLongRunning",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Sf(d),m=new Ae;return Object.assign(m,p),m})}else{const c=cu(this.apiClient,e);return u=y("{model}:predictLongRunning",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Jc(d),m=new Ae;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zf extends O{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=_o(e);return u=y("{operationName}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a}else{const c=Eo(e);return u=y("{operationName}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=So(e);return l=y("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Of(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function ro(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Of(t)),e}function jf(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],ro(o)),e}function ed(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>jf(r))),s(e,["speakerVoiceConfigs"],o)}return e}function nd(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],ro(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],ed(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function td(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function od(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function id(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function sd(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function rd(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],td(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],od(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],id(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],sd(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function ld(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>rd(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function ad(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function ud(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function cd(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],ud(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function fd(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function dd(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],fd(t)),e}function pd(){return{}}function md(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function gd(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(c=>ad(c))),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],cd(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],dd(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],pd());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],md(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function hd(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function It(){return{}}function Td(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function yd(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Td(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function Cd(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function vd(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Cd(o)),e}function Ed(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function Sd(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const f=i(n,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);const c=i(n,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const d=i(n,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],nd(Oe(p)));const m=i(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],ld(F(g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let _=ae(h);Array.isArray(_)&&(_=_.map(x=>gd(le(x)))),s(e,["setup","tools"],_)}const T=i(n,["sessionResumption"]);e!==void 0&&T!=null&&s(e,["setup","sessionResumption"],hd(T));const C=i(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&s(e,["setup","inputAudioTranscription"],It());const S=i(n,["outputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","outputAudioTranscription"],It());const v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],yd(v));const E=i(n,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],vd(E));const I=i(n,["proactivity"]);return e!==void 0&&I!=null&&s(e,["setup","proactivity"],Ed(I)),t}function _d(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],P(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Sd(r,t)),t}function Id(n,e,t){const o={},r=i(e,["expireTime"]);t!==void 0&&r!=null&&s(t,["expireTime"],r);const l=i(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&s(t,["newSessionExpireTime"],l);const a=i(e,["uses"]);t!==void 0&&a!=null&&s(t,["uses"],a);const u=i(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&s(t,["bidiGenerateContentSetup"],_d(n,u));const f=i(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&s(t,["fieldMask"],f),o}function Md(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],Id(n,o,t)),t}function Ad(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rd(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function Pd(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=Rd(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(c=>a.includes(c)?`generationConfig.${c}`:c));const f=[];l&&f.push(l),u.length>0&&f.push(...u),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class xd extends O{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Md(this.apiClient,e);l=y("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const f=Pd(u,e.config);return r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>Ad(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nd(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Dd(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function wd(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Dd(t,e)),e}function kd(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Ld(n){const e={},t=i(n,["textInput"]);t!=null&&s(e,["textInput"],t);const o=i(n,["output"]);return o!=null&&s(e,["output"],o),e}function Ud(n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=i(n,["examples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Ld(r))),s(e,["examples","examples"],o)}return e}function Fd(n,e){const t={};if(i(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=i(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&s(e,["displayName"],o),i(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=i(n,["epochCount"]);e!==void 0&&r!=null&&s(e,["tuningTask","hyperparameters","epochCount"],r);const l=i(n,["learningRateMultiplier"]);if(l!=null&&s(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),i(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=i(n,["batchSize"]);e!==void 0&&a!=null&&s(e,["tuningTask","hyperparameters","batchSize"],a);const u=i(n,["learningRate"]);if(e!==void 0&&u!=null&&s(e,["tuningTask","hyperparameters","learningRate"],u),i(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function Vd(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["preTunedModel"]);o!=null&&s(e,["preTunedModel"],o);const r=i(n,["trainingDataset"]);r!=null&&s(e,["tuningTask","trainingData"],Ud(r));const l=i(n,["config"]);return l!=null&&s(e,["config"],Fd(l,e)),e}function qd(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Gd(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function Hd(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Gd(t,e)),e}function $d(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Bd(n,e){const t={},o=i(n,["gcsUri"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],o);const r=i(n,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),i(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function Jd(n,e){const t={},o=i(n,["gcsUri"]);o!=null&&s(t,["validationDatasetUri"],o);const r=i(n,["vertexDatasetResource"]);return e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),t}function Yd(n,e){const t={},o=i(n,["validationDataset"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec"],Jd(o,t));const r=i(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&s(e,["tunedModelDisplayName"],r);const l=i(n,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const a=i(n,["epochCount"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const u=i(n,["learningRateMultiplier"]);e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const f=i(n,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const c=i(n,["preTunedModelCheckpointId"]);c!=null&&s(t,["preTunedModel","checkpointId"],c);const d=i(n,["adapterSize"]);if(e!==void 0&&d!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),i(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=i(n,["labels"]);return e!==void 0&&p!=null&&s(e,["labels"],p),t}function Wd(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["preTunedModel"]);o!=null&&s(e,["preTunedModel"],o);const r=i(n,["trainingDataset"]);r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],Bd(r,e));const l=i(n,["config"]);return l!=null&&s(e,["config"],Yd(l,e)),e}function Kd(n){const e={},t=i(n,["name"]);t!=null&&s(e,["model"],t);const o=i(n,["name"]);return o!=null&&s(e,["endpoint"],o),e}function lo(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],kt(r));const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["tuningTask","startTime"]);a!=null&&s(e,["startTime"],a);const u=i(n,["tuningTask","completeTime"]);u!=null&&s(e,["endTime"],u);const f=i(n,["updateTime"]);f!=null&&s(e,["updateTime"],f);const c=i(n,["description"]);c!=null&&s(e,["description"],c);const d=i(n,["baseModel"]);d!=null&&s(e,["baseModel"],d);const p=i(n,["_self"]);p!=null&&s(e,["tunedModel"],Kd(p));const m=i(n,["customBaseModel"]);m!=null&&s(e,["customBaseModel"],m);const g=i(n,["experiment"]);g!=null&&s(e,["experiment"],g);const h=i(n,["labels"]);h!=null&&s(e,["labels"],h);const T=i(n,["outputUri"]);T!=null&&s(e,["outputUri"],T);const C=i(n,["pipelineJob"]);C!=null&&s(e,["pipelineJob"],C);const S=i(n,["serviceAccount"]);S!=null&&s(e,["serviceAccount"],S);const v=i(n,["tunedModelDisplayName"]);return v!=null&&s(e,["tunedModelDisplayName"],v),e}function bd(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>lo(a))),s(e,["tuningJobs"],l)}return e}function zd(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["metadata"]);r!=null&&s(e,["metadata"],r);const l=i(n,["done"]);l!=null&&s(e,["done"],l);const a=i(n,["error"]);return a!=null&&s(e,["error"],a),e}function Xd(n){const e={},t=i(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const o=i(n,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(n,["step"]);r!=null&&s(e,["step"],r);const l=i(n,["endpoint"]);return l!=null&&s(e,["endpoint"],l),e}function Qd(n){const e={},t=i(n,["model"]);t!=null&&s(e,["model"],t);const o=i(n,["endpoint"]);o!=null&&s(e,["endpoint"],o);const r=i(n,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Xd(a))),s(e,["checkpoints"],l)}return e}function Ke(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],kt(r));const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["startTime"]);a!=null&&s(e,["startTime"],a);const u=i(n,["endTime"]);u!=null&&s(e,["endTime"],u);const f=i(n,["updateTime"]);f!=null&&s(e,["updateTime"],f);const c=i(n,["error"]);c!=null&&s(e,["error"],c);const d=i(n,["description"]);d!=null&&s(e,["description"],d);const p=i(n,["baseModel"]);p!=null&&s(e,["baseModel"],p);const m=i(n,["tunedModel"]);m!=null&&s(e,["tunedModel"],Qd(m));const g=i(n,["preTunedModel"]);g!=null&&s(e,["preTunedModel"],g);const h=i(n,["supervisedTuningSpec"]);h!=null&&s(e,["supervisedTuningSpec"],h);const T=i(n,["tuningDataStats"]);T!=null&&s(e,["tuningDataStats"],T);const C=i(n,["encryptionSpec"]);C!=null&&s(e,["encryptionSpec"],C);const S=i(n,["partnerModelTuningSpec"]);S!=null&&s(e,["partnerModelTuningSpec"],S);const v=i(n,["customBaseModel"]);v!=null&&s(e,["customBaseModel"],v);const E=i(n,["experiment"]);E!=null&&s(e,["experiment"],E);const I=i(n,["labels"]);I!=null&&s(e,["labels"],I);const _=i(n,["outputUri"]);_!=null&&s(e,["outputUri"],_);const x=i(n,["pipelineJob"]);x!=null&&s(e,["pipelineJob"],x);const N=i(n,["serviceAccount"]);N!=null&&s(e,["serviceAccount"],N);const U=i(n,["tunedModelDisplayName"]);return U!=null&&s(e,["tunedModelDisplayName"],U),e}function Zd(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ke(a))),s(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Od extends O{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Te(Z.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel},r=Object.assign(Object.assign({},t),{preTunedModel:o});return r.baseModel=void 0,await this.tuneInternal(r)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),r=await this.tuneMldevInternal(o);let l="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?l=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(l=r.name.split("/operations/")[0]),{name:l,state:Ve.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=qd(e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>Ke(d))}else{const c=Nd(e);return u=y("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>lo(d))}}async listInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Hd(e);return u=y("tuningJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Zd(d),m=new et;return Object.assign(m,p),m})}else{const c=wd(e);return u=y("tunedModels",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=bd(d),m=new et;return Object.assign(m,p),m})}}async cancel(e){var t,o,r,l;let a="",u={};if(this.apiClient.isVertexAI()){const f=$d(e);a=y("{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const f=kd(e);a=y("{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Wd(e);return l=y("tuningJobs",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>Ke(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Vd(e);return l=y("tunedModels",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>zd(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jd{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ep=1024*1024*8,np=3,tp=1e3,op=2,Fe="x-goog-upload-status";async function ip(n,e,t){var o,r,l;let a=0,u=0,f=new qe(new Response),c="upload";for(a=n.size;u<a;){const p=Math.min(ep,a-u),m=n.slice(u,u+p);u+p>=a&&(c+=", finalize");let g=0,h=tp;for(;g<np&&(f=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((o=f==null?void 0:f.headers)===null||o===void 0)&&o[Fe]));)g++,await rp(h),h=h*op;if(u+=p,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[Fe])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(f==null?void 0:f.json());if(((l=f==null?void 0:f.headers)===null||l===void 0?void 0:l[Fe])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function sp(n){return{size:n.size,type:n.type}}function rp(n){return new Promise(e=>setTimeout(e,n))}class lp{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ip(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sp(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ap{create(e,t,o){return new up(e,t,o)}}class up{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mt="x-goog-api-key";class cp{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Mt)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Mt,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fp="gl-node/";class dp{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=vo(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new cp(this.apiKey);this.apiClient=new Nf({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:fp+"web",uploader:new lp,downloader:new jd}),this.models=new Qf(this.apiClient),this.live=new Jf(this.apiClient,r,new ap),this.batches=new fs(this.apiClient),this.chats=new Cr(this.models,this.apiClient),this.caches=new hr(this.apiClient),this.files=new wr(this.apiClient),this.operations=new Zf(this.apiClient),this.authTokens=new xd(this.apiClient),this.tunings=new Od(this.apiClient)}}const ao=void 0;console.warn("API_KEY environment variable not set. Gemini provider will not work.");const pp=new dp({apiKey:ao}),At={type:V.OBJECT,properties:{asset:{type:V.STRING,description:"The asset pair, e.g., 'BTC/USD'"},action:{type:V.STRING,enum:["LONG","SHORT"],description:"The trade action"},entry:{type:V.NUMBER,description:"The suggested entry price"},target:{type:V.NUMBER,description:"The take-profit target price"},stopLoss:{type:V.NUMBER,description:"The stop-loss price"},reasoning:{type:V.STRING,description:"A brief justification for the trade"}},required:["asset","action","entry","target","stopLoss","reasoning"]},De=[{id:"scalper",name:"Scalper",icon:"fa-solid fa-bolt",systemInstruction:"You are an aggressive, high-frequency scalper. Your goal is to identify and execute trades based on short-term market volatility. Prioritize technical indicators like RSI, MACD on 1-minute and 5-minute charts. Provide concise, actionable directives with tight stop-losses."},{id:"swing",name:"Swing Trader",icon:"fa-solid fa-wave-square",systemInstruction:"You are a patient swing trader. Your goal is to capture gains in an asset over a period of several days to several weeks. You rely on identifying market trends using daily and 4-hour charts, support/resistance levels, and moving averages. Your reasoning should be clear and based on the medium-term trend."},{id:"degen",name:"Degen",icon:"fa-solid fa-rocket",systemInstruction:'You are a high-risk, high-reward "degen" trader. You look for explosive, meme-driven opportunities. Your analysis is based on social media sentiment, hype, and narratives. You are not afraid of high volatility and aim for moonshot trades. Justify your trades with narrative and sentiment, not just technicals.'}],mp=[{id:"gemini",name:"Gemini",icon:"fa-solid fa-star-of-life"},{id:"ollama",name:"Ollama",icon:"fa-solid fa-server"}],uo=["Fed hints at potential rate cuts later this year, market reacts positively.","Major exchange experiences downtime, causing temporary BTC price dip.","New institutional adoption of Bitcoin ETF continues to drive demand.","Whale activity spotted moving large amounts of ETH to cold storage.","Geopolitical tensions in Eastern Europe cause market uncertainty."],gp={bids:[{price:68120.5,amount:.75,total:51090.37},{price:68119,amount:1.25,total:85148.75},{price:68118.5,amount:.5,total:34059.25},{price:68115,amount:2.1,total:143041.5},{price:68112,amount:3.5,total:238392}],asks:[{price:68122,amount:.9,total:61309.8},{price:68123.5,amount:1.5,total:102185.25},{price:68124,amount:.8,total:54499.2},{price:68128,amount:1.75,total:119224},{price:68130,amount:2.2,total:149886}]};let re=De[0].id,J="gemini",Y="llama3",b=50,H=null,R=null,ge=[],Q=[];const hp=100;let Rt=[],q=null,Se,_e=null,ne=null,X={},be=0;const K=()=>{try{const n={selectedPersonaId:re,selectedProviderId:J,allocation:b,tradeHistory:ge,logEntries:Q,activeTrade:R,currentDirective:H,ollamaModel:Y};localStorage.setItem("aiBitboyState",JSON.stringify(n))}catch(n){console.error("Failed to save state to localStorage:",n)}},Tp=()=>{const n=localStorage.getItem("aiBitboyState");if(n)try{const e=JSON.parse(n);if(!e)return;re=e.selectedPersonaId||De[0].id,J=e.selectedProviderId||"gemini",b=e.allocation||50,ge=e.tradeHistory||[],Q=e.logEntries||[],R=e.activeTrade||null,H=e.currentDirective||null,Y=e.ollamaModel||"llama3"}catch(e){console.error("Failed to load state from localStorage:",e),localStorage.removeItem("aiBitboyState")}},M=n=>document.querySelector(n),yp=n=>document.querySelectorAll(n),L=(n,e="default")=>{const t=new Date().toLocaleTimeString();Q.unshift({timestamp:t,message:n,type:e}),Q.length>hp&&Q.pop(),co(),K()},co=()=>{const n=M("#ai-log");if(!Q.length){n.innerHTML='<div class="placeholder">Log is clear.</div>';return}n.innerHTML=Q.map(e=>`
        <div class="log-item log-type-${e.type||"default"}">
            <span class="timestamp">${e.timestamp}</span>
            <span class="message">${e.message}</span>
        </div>
    `).join("")},fo=()=>{const n=M("#persona-selector");n.innerHTML=De.map(e=>`
        <div class="persona-card ${re===e.id?"active":""}" data-id="${e.id}" role="button" aria-pressed="${re===e.id}">
            <div class="persona-avatar"><i class="${e.icon}"></i></div>
            <div class="persona-name">${e.name}</div>
        </div>
    `).join("")},po=()=>{const n=M("#provider-selector");n.innerHTML=mp.map(e=>`
        <div class="provider-card ${J===e.id?"active":""}" data-id="${e.id}" role="button" aria-pressed="${J===e.id}">
            <div class="provider-avatar"><i class="${e.icon}"></i></div>
            <div class="provider-name">${e.name}</div>
        </div>
    `).join(""),M("#local-model-container").style.display=J==="ollama"?"block":"none",M("#local-model-input").value=Y},mo=()=>{const n=M("#trade-history");if(!ge.length){n.innerHTML='<div class="placeholder">No trades completed yet.</div>';return}n.innerHTML=ge.map(e=>`
        <div class="trade-item">
            <span>${e.asset} [${e.action}]</span>
            <span class="trade-item-pnl ${e.pnl>=0?"positive":"negative"}">
                ${e.pnl.toFixed(2)} (${e.pnlPercent.toFixed(2)}%)
            </span>
        </div>
    `).join("")},Cp=()=>{const n=M("#order-book-container"),{bids:e,asks:t}=gp,o=Math.max(...[...e,...t].map(u=>u.total)),r=e.map(u=>`
        <div class="order-book-row">
            <div class="depth-bar" style="width: ${u.total/o*100}%"></div>
            <span>${u.price.toFixed(2)}</span>
            <span>${u.amount.toFixed(4)}</span>
            <span>${(u.total/1e3).toFixed(1)}K</span>
        </div>
    `).join(""),l=t.map(u=>`
        <div class="order-book-row">
            <div class="depth-bar" style="width: ${u.total/o*100}%"></div>
            <span>${u.price.toFixed(2)}</span>
            <span>${u.amount.toFixed(4)}</span>
            <span>${(u.total/1e3).toFixed(1)}K</span>
        </div>
    `).join(""),a=t[0].price-e[0].price;n.innerHTML=`
        <h3 class="order-book-title">ORDER BOOK :: BTC/USD</h3>
        <div class="order-book-layout">
            <div class="order-book-column order-book-bids">
                <div class="order-book-header">
                    <span>PRICE (USD)</span>
                    <span>AMOUNT (BTC)</span>
                    <span>TOTAL</span>
                </div>
                <div class="order-book-rows">${r}</div>
            </div>
            <div class="order-book-spread">
                <span class="spread-value">${a.toFixed(2)}</span>
                <span class="spread-label">SPREAD</span>
            </div>
            <div class="order-book-column order-book-asks">
                <div class="order-book-header">
                    <span>PRICE (USD)</span>
                    <span>AMOUNT (BTC)</span>
                    <span>TOTAL</span>
                </div>
                <div class="order-book-rows">${l}</div>
            </div>
        </div>
    `},vp=()=>{const n=M("#news-feed");n.innerHTML=uo.map(e=>`<div class="news-item">${e}</div>`).join("")},Ie=(n,e=!1,t=!1)=>{const o=M("#ai-status-text"),r=M("#status-light");o.textContent=n,r.classList.toggle("error",e),r.classList.toggle("pulse",!e&&t)},he=(n,e="success")=>{const t=M("#notification-container"),o=document.createElement("div");o.className=`notification ${e}`,o.innerHTML=`<i class="fas ${e==="success"?"fa-check-circle":"fa-exclamation-triangle"}"></i> ${n}`,o.setAttribute("role",e==="error"?"alert":"status"),t.appendChild(o),setTimeout(()=>o.classList.add("show"),10),setTimeout(()=>{o.classList.remove("show"),o.addEventListener("transitionend",()=>o.remove())},5e3)},Ep=()=>{if(!H)return;const{asset:n,action:e,entry:t,target:o,stopLoss:r,reasoning:l}=H,a=M("#directive-output");a.innerHTML=`
        <div id="trade-confirmation" class="content-fade-in">
            <p class="reasoning-text">"${l}"</p>
            <div class="confirmation-details-grid">
                <div class="confirmation-detail-item"><strong>ASSET:</strong> <span>${n}</span></div>
                <div class="confirmation-detail-item"><strong>ACTION:</strong> <span class="action-${e.toLowerCase()}">${e}</span></div>
                <div class="confirmation-detail-item"><strong>ENTRY:</strong> <span>${t.toFixed(2)}</span></div>
                <div class="confirmation-detail-item"><strong>ALLOCATION:</strong> <span>${b}%</span></div>
                <div class="confirmation-detail-item"><strong>TARGET:</strong> <span>${o.toFixed(2)}</span></div>
                <div class="confirmation-detail-item"><strong>STOP:</strong> <span>${r.toFixed(2)}</span></div>
            </div>
        </div>`;const u=M(".btn-group");u.innerHTML=`
        <button id="reject-directive-btn" class="btn btn-sell">REJECT</button>
        <button id="execute-directive-btn" class="btn btn-buy">EXECUTE</button>
    `,M("#execute-directive-btn").addEventListener("click",Ap),M("#reject-directive-btn").addEventListener("click",()=>{L("Directive rejected by user."),H=null,we(),K()})},nn=()=>{if(!R)return;const{asset:n,action:e,entry:t,target:o,stopLoss:r,allocation:l,currentPrice:a}=R,u=a||t,f=e==="LONG"?(u-t)*l:(t-u)*l,c=f/(t*l)*100*100,d=M("#directive-output");d.innerHTML=`
        <div id="live-trade-monitor" class="content-fade-in">
            <div class="trade-monitor-header">
                <span class="trade-monitor-asset">${n}</span>
                <span class="trade-monitor-direction direction-${e.toLowerCase()}">${e}</span>
            </div>
            <div class="pnl-display">
                <div class="pnl-value ${f>=0?"positive":"negative"}">${f.toFixed(2)} USD</div>
                <div class="pnl-percent ${f>=0?"positive":"negative"}">${c.toFixed(2)}%</div>
            </div>
            <div class="trade-details-grid">
                <div class="trade-detail-item"><strong>ENTRY:</strong> <span>${t.toFixed(2)}</span></div>
                <div class="trade-detail-item"><strong>CURRENT:</strong> <span>${u.toFixed(2)}</span></div>
            </div>
            <div class="trade-progress-bar" id="tp-progress">
                <div class="progress-label"><span>ENTRY</span><span>TARGET: ${o.toFixed(2)}</span></div>
                <div class="progress-track"><div class="progress-fill" style="width: ${Math.min(100,Math.max(0,(u-t)/(o-t)*100))}%;"></div></div>
            </div>
            <div class="trade-progress-bar" id="sl-progress">
                <div class="progress-label"><span>STOP: ${r.toFixed(2)}</span><span>ENTRY</span></div>
                <div class="progress-track"><div class="progress-fill" style="width: ${Math.min(100,Math.max(0,(t-u)/(t-r)*100))}%;"></div></div>
            </div>
        </div>
    `;const p=M(".btn-group");p.innerHTML='<button id="close-trade-btn" class="btn btn-sell">CLOSE TRADE</button>',M("#close-trade-btn").addEventListener("click",()=>de(u))},we=()=>{M("#directive-output").innerHTML='<span class="placeholder">Select a persona and generate a directive...</span>',M(".btn-group").innerHTML='<button id="generate-directive-btn" class="btn btn-buy">GENERATE DIRECTIVE</button>',M("#generate-directive-btn").addEventListener("click",Mp),Ie("AWAITING DIRECTIVE")},Sp=n=>{const e=["asset","action","entry","target","stopLoss","reasoning"];for(const t of e)if(!(t in n))return{isValid:!1,error:`Missing key: ${t}`};return n.action!=="LONG"&&n.action!=="SHORT"?{isValid:!1,error:`Invalid action: ${n.action}`}:{isValid:!0}},_p=()=>{if(!H)return;const n=parseFloat(M("#manual-tp-input").value),e=parseFloat(M("#manual-sl-input").value);!isNaN(n)&&n>0&&(H.target=n),!isNaN(e)&&e>0&&(H.stopLoss=e)},Ip=async()=>{const n=M("#test-ollama-btn");n.disabled=!0,n.textContent="...";try{const e=await fetch("http://localhost:11434/api/tags");if(!e.ok)throw new Error(`Server responded with status ${e.status}`);const t=await e.json();if(he("Ollama connection successful!","success"),t.models.some(r=>r.name.startsWith(Y)))L(`Ollama connection test OK. Model "${Y}" found on server.`);else{const r=t.models.length>0?t.models.map(l=>l.name.split(":")[0]).join(", "):"none";L(`Ollama connection test OK, but model "${Y}" not found. Available: ${r}`,"default")}}catch(e){console.error("Ollama connection test failed:",e),he("Ollama connection failed. Check server is running.","error"),L("Ollama connection test failed. Ensure server is running and accessible (check CORS).","error")}finally{n.disabled=!1,n.textContent="Test"}},Mp=async()=>{M("#generate-directive-btn").disabled=!0,M(".btn-group").innerHTML='<button id="generate-directive-btn" class="btn btn-buy" disabled>SYNTHESIZING...</button>',M("#directive-output").innerHTML=`
        <div class="synthesizing-indicator">
             <span>SYNTHESIZING</span>
             <div class="cursor"></div>
        </div>`,Ie("SYNTHESIZING DIRECTIVE...",!1,!0);const n=De.find(t=>t.id===re);L(`Engaging ${J.toUpperCase()} with ${n.name} persona...`);let e;try{const t=`Analyze the current market conditions and provide a trade directive. Current news: ${uo.join(" ")}`;if(J==="gemini"){if(!ao)throw new Error("Gemini API key is not configured.");const l=await pp.models.generateContent({model:"gemini-2.5-flash",contents:t,config:{systemInstruction:n.systemInstruction,responseMimeType:"application/json",responseSchema:At}});L("AI analysis complete. Parsing response...","ai-analysis");const a=l.text.trim();e=JSON.parse(a)}else if(J==="ollama"){L(`Connecting to local Ollama instance with model: ${Y}...`);try{const l=await fetch("http://localhost:11434/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:Y,system:`${n.systemInstruction}

You MUST respond with a single, valid JSON object that conforms to the schema provided. Do not include any other text, markdown, or explanations before or after the JSON object.`,prompt:`The user's request is: "${t}". The required JSON schema is: ${JSON.stringify(At)}`,format:"json",stream:!1})});if(!l.ok){const u=await l.text();throw new Error(`Ollama request failed: ${l.status} - ${u}`)}const a=await l.json();if(!a.response)throw new Error('Ollama response is missing the "response" field.');L("Ollama analysis complete. Parsing response...","ai-analysis"),e=JSON.parse(a.response)}catch(l){throw l.message.includes("Failed to fetch")?new Error("Connection to local Ollama instance failed. Ensure it is running and accessible from the browser (check CORS settings if running in a container)."):l}}else throw new Error(`Unsupported AI provider: ${J}`);const{isValid:o,error:r}=Sp(e);if(!o)throw new Error(`AI response validation failed: ${r}`);Ie("DIRECTIVE RECEIVED"),H=e,_p(),Ep(),K()}catch(t){console.error("Directive generation failed:",t),L(`Error: ${t.message}`,"error"),Ie("SYNTHESIS FAILED",!0),M("#directive-output").innerHTML=`
            <div class="error-message">
                <h4>SYNTHESIS FAILED</h4>
                <p>${t.message.replace(/\n/g,"<br>")}</p>
                <p class="error-subtext">Check logs for more details.</p>
            </div>`,he("Directive generation failed.","error"),setTimeout(we,3e3)}},Ap=()=>{H&&(R={...H,allocation:b/100},H=null,L(`Executing ${R.action} on ${R.asset} at ${R.entry} with ${b}% allocation.`),he(`Trade Executed: ${R.action} ${R.asset}`,"success"),nn(),go(),K())},de=n=>{if(!R)return;const{asset:e,action:t,entryPrice:o,allocation:r}={...R,entryPrice:R.entry},l=t==="LONG"?(n-o)*r:(o-n)*r,a=l/(o*r)*100*100;ge.unshift({asset:e,action:t,entryPrice:o,closePrice:n,pnl:l,pnlPercent:a,timestamp:new Date().toISOString()}),L(`Trade closed on ${e}. PnL: ${l.toFixed(2)} (${a.toFixed(2)}%)`),he(`Trade Closed. PnL: ${l.toFixed(2)} USD`,"success"),R=null,ho(),mo(),we(),K()},go=()=>{R&&(Se=window.setInterval(()=>{if(!R){ho();return}let n=R.currentPrice||R.entry;const t=(Math.random()-.5)*n*5e-4;n+=t,R.currentPrice=n,R.action==="LONG"&&n>=R.target?(L(`Take profit hit for ${R.asset}!`),de(R.target)):R.action==="LONG"&&n<=R.stopLoss?(L(`Stop loss hit for ${R.asset}.`,"error"),de(R.stopLoss)):R.action==="SHORT"&&n<=R.target?(L(`Take profit hit for ${R.asset}!`),de(R.target)):R.action==="SHORT"&&n>=R.stopLoss?(L(`Stop loss hit for ${R.asset}.`,"error"),de(R.stopLoss)):nn()},1e3))},ho=()=>{Se&&clearInterval(Se),Se=void 0},Rp=(n=200,e=68e3,t=.01)=>{const o=[];let r=e;const l=new Date;for(let a=n-1;a>=0;a--){const u=dateFns.subHours(l,a).getTime();o.push({x:u,y:r}),r+=(Math.random()-.5)*(r*t)}return o},Pp=n=>{if(!_e)return;const e=Chart.helpers.getRelativePosition(n,q),t=q.scales.x.getValueForPixel(e.x),o=q.scales.y.getValueForPixel(e.y);if(_e==="trendline")if(!ne)ne={x:t,y:o},L("Trendline start point set. Click to set end point.");else{const r=`trendline_${be++}`;X[r]={type:"line",xMin:ne.x,yMin:ne.y,xMax:t,yMax:o,borderColor:"#E6DB74",borderWidth:2},q.options.plugins.annotation.annotations=X,q.update(),L("Trendline created."),ne=null,me(null)}else if(_e==="annotation"){const r=prompt("Enter annotation text:");if(r){const l=`label_${be++}`;X[l]={type:"label",xValue:t,yValue:o,content:r,backgroundColor:"rgba(39, 40, 34, 0.8)",color:"#F8F8F2",font:{size:12,family:"Roboto Mono"},padding:6,borderRadius:4},q.options.plugins.annotation.annotations=X,q.update(),L(`Annotation added: "${r}"`)}me(null)}},xp=()=>{const n=M("#marketChart").getContext("2d");if(!n)return;Rt=Rp();const e={type:"line",data:{datasets:[{label:"BTC/USD",data:Rt,borderColor:"#66D9EF",backgroundColor:"rgba(102, 217, 239, 0.1)",borderWidth:2,pointRadius:0,fill:!0,tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"hour",tooltipFormat:"MMM dd, HH:mm",displayFormats:{hour:"HH:mm"}},grid:{color:"rgba(73, 72, 62, 0.5)"},ticks:{color:"#75715E"}},y:{grid:{color:"rgba(73, 72, 62, 0.5)"},ticks:{color:"#75715E"}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#272822",titleFont:{family:"Roboto Mono"},bodyFont:{family:"Roboto Mono"},padding:10},zoom:{pan:{enabled:!0,mode:"xy"},zoom:{wheel:{enabled:!0},mode:"xy"}},annotation:{annotations:X}},onClick:Pp}};q=new Chart(n,e)},me=n=>{_e=n,ne=null,yp(".chart-tool-btn").forEach(e=>e.classList.remove("active")),n?(M(`#${n==="trendline"?"draw-trendline":"add-annotation"}-btn`).classList.add("active"),L(`Drawing mode activated: ${n}.`)):L("Drawing mode deactivated.")},Np=()=>{M("#persona-selector").addEventListener("click",t=>{const o=t.target.closest(".persona-card");o&&o.dataset.id&&(re=o.dataset.id,fo(),K())}),M("#provider-selector").addEventListener("click",t=>{const o=t.target.closest(".provider-card");o&&o.dataset.id&&(J=o.dataset.id,po(),K())}),M("#local-model-input").addEventListener("change",t=>{Y=t.target.value.trim(),L(`Ollama model set to: ${Y}`),K()}),M("#test-ollama-btn").addEventListener("click",Ip);const n=M("#allocation-slider"),e=M("#allocation-value");n.addEventListener("input",()=>{b=parseInt(n.value),e.textContent=`${b}%`}),n.addEventListener("change",K),M("#reset-zoom-btn").addEventListener("click",()=>q==null?void 0:q.resetZoom()),M("#draw-trendline-btn").addEventListener("click",()=>me("trendline")),M("#add-annotation-btn").addEventListener("click",()=>me("annotation")),M("#clear-drawings-btn").addEventListener("click",()=>{X={},be=0,q.options.plugins.annotation.annotations=X,q.update(),L("Cleared all drawings from chart."),me(null)})},Dp=()=>{Tp(),L("AI-BITBOY-DEX Strategic Synthesis Core initialized."),M("#allocation-slider").value=String(b),M("#allocation-value").textContent=`${b}%`,fo(),po(),vp(),Cp(),co(),mo(),xp(),R?(nn(),go()):we(),Np()};document.addEventListener("DOMContentLoaded",Dp);
